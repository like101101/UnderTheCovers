
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>20. UC-SLS Lecture 20 : Using LibC to access the OS and escape the confines our process &#8212; UndertheCovers</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://unpkg.com/@jupyter-widgets/html-manager@^0.20.1/dist/embed-amd.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="21. UC-SLS Lecture 21 : The rest of LibC and other libraries" href="L21.html" />
    <link rel="prev" title="19. UC-SLS Lecture 19 : Using C to map and organize our data bytes - Data Types" href="L19.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../_static/logo.jpg" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">UndertheCovers</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../intro_ln.html">
                    Under the Covers : The Secret Life of Software
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Course Specfic Introductions
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../L00_210_JA.html">
   CS210 Computer Systems
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../L00_400_F21_JA.html">
   CS400 Fall 2021 : Machine Level Programming
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Viewing Lectures
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../lnhowto.html">
   How to “view” lecture notes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../howto.html">
   How to read this book
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  The Unix Development Environment
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../unix/L01.html">
   1. SLS: Part I - UNIX : Introduction &amp;  Preliminaries
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../unix/L02.html">
   2. SLS Lecture 2 : Shell Part II : Programming, Files and Directories
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../unix/L03.html">
   3. UNIX Process, I/O and Credentials
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../unix/L04.html">
   4. SLS Lecture 4 : Editors, Make and Terminal IDEs
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../unix/L05.html">
   5. SLS Lecture 5a : Version Control and GIT: Part I”
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../unix/L06.html">
   6. SLS Lecture 5b : Version Control and GIT: Part II”
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  The Belly of the Beast: The von Neumann Architecture and Assembly Programming
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../assembly/L07.html">
   7. SLS Lecture 7 : Assembly Programming Introduction
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../assembly/L08.html">
   8. SLS Lecture 8 :  Writing some simple assembly programs
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../assembly/L09.html">
   9. UC-SLS Lecture 9 : Assembly : Operations and Data Types
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../assembly/L10.html">
   10. SLS Lecture 10 : Assembly : Program Anatomy I
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../assembly/L11.html">
   11. SLS Lecture 11 :  Program Anatomy II : Functions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../assembly/L12.html">
   12. SLS Lecture 12 : Program Anatomy III : Code as Data
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../assembly/L13.html">
   13. SLS Lecture 13 : Program Anatomy IV: The Tree of Bytes and Data Structures
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../assembly/L14.html">
   14. SLS Lecture 14 : Assembly using the OS
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../assembly/L15.html">
   15. SLS Lecture 15 : Processes and Virtual Memory
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../assembly/L16.html">
   16. SLS Lecture 16 : Caches : Constructing them from first principles
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Into the Light : C Programming
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="L17.html">
   17. UC-SLS Lecuture 17 : In to the Light - C Intro
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="L18.html">
   18. UC-SLS Lecture 18 : Using C to write and organize opcode bytes - Functions
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="L19.html">
   19. UC-SLS Lecture 19 : Using C to map and organize our data bytes - Data Types
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   20. UC-SLS Lecture 20 : Using LibC to access the OS and escape the confines our process
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="L21.html">
   21. UC-SLS Lecture 21 : The rest of LibC and other libraries
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="L22.html">
   22. SLS Lecture 22 : Topics
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="L23.html">
   23. SLS Lecture 23 : Topics
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="L24.html">
   24. SLS Lecture 24 : Topics
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="L25.html">
   25. SLS Lecture 25 : Topics
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<div class="menu-dropdown menu-dropdown-launch-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Launch interactive content">
      <i class="fas fa-rocket"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
    </ul>
  </div>
</div>

<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>
<a href="https://github.com/jappavoo/UndertheCovers"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="bottom"
title="Source repository"
>
  

<span class="headerbtn__icon-container">
  <i class="fab fa-github"></i>
  </span>

</a>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../_sources/C/L20.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.ipynb</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#overview">
   20.1. Overview
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#preliminaries">
   20.2. Preliminaries
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#sdks">
     20.2.1. SDKs
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#documentation">
       20.2.1.1. Documentation
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#header-files">
       20.2.1.2. Header files
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#libraries">
       20.2.1.3. Libraries
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#linker-and-libraries">
         20.2.1.3.1. Linker and Libraries
        </a>
       </li>
      </ul>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#example">
       20.2.1.4. Example
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#defaults">
       20.2.1.5. Defaults
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#c-standard-library-libc-lc">
   20.3. C Standard Library
   <code class="docutils literal notranslate">
    <span class="pre">
     libc
    </span>
   </code>
   (
   <code class="docutils literal notranslate">
    <span class="pre">
     -lc
    </span>
   </code>
   )
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id1">
     20.3.1. Overview
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#dynamic-memory-management">
     20.3.2. Dynamic Memory Management
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#two-categories">
       20.3.2.1. Two categories
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#main-calls">
       20.3.2.2. Main calls
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#explore-with-an-example">
     20.3.3. Explore with an example
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#man-malloc">
       20.3.3.1. man malloc
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#libc-typically-c-wrappers-for-os-system-calls-and-support-for-making-syscalls-directly-in-c">
       20.3.3.2. LibC typically C wrappers for OS system calls and support for making syscalls directly in C
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#you-can-use-mmap-and-munmap-in-your-c-programs-to-manage-your-own-dynamic-address-space-mapping">
       20.3.3.3. You can use
       <code class="docutils literal notranslate">
        <span class="pre">
         mmap
        </span>
       </code>
       and
       <code class="docutils literal notranslate">
        <span class="pre">
         munmap
        </span>
       </code>
       in your C programs to manage your own  dynamic address space mapping
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#under-the-covers-malloc-free-and-friends">
     20.3.4. Under the covers
     <code class="docutils literal notranslate">
      <span class="pre">
       malloc
      </span>
     </code>
     ,
     <code class="docutils literal notranslate">
      <span class="pre">
       free
      </span>
     </code>
     and friends
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#important-points-about-dynamic-memory">
       20.3.4.1. Important points about dynamic memory
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#layers">
   20.4. Layers
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#io-is-no-different">
   20.5. IO is no different
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#lowest-layer-is-wrappers-for-core-unix-i-o-routines">
     20.5.1. Lowest layer is wrappers for core UNIX I/O routines
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#a-layer-up-buffered-and-formated-i-o">
     20.5.2. A layer up buffered and formated I/O
    </a>
   </li>
  </ul>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>UC-SLS Lecture 20 : Using LibC to access the OS and escape the confines our process</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#overview">
   20.1. Overview
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#preliminaries">
   20.2. Preliminaries
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#sdks">
     20.2.1. SDKs
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#documentation">
       20.2.1.1. Documentation
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#header-files">
       20.2.1.2. Header files
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#libraries">
       20.2.1.3. Libraries
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#linker-and-libraries">
         20.2.1.3.1. Linker and Libraries
        </a>
       </li>
      </ul>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#example">
       20.2.1.4. Example
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#defaults">
       20.2.1.5. Defaults
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#c-standard-library-libc-lc">
   20.3. C Standard Library
   <code class="docutils literal notranslate">
    <span class="pre">
     libc
    </span>
   </code>
   (
   <code class="docutils literal notranslate">
    <span class="pre">
     -lc
    </span>
   </code>
   )
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id1">
     20.3.1. Overview
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#dynamic-memory-management">
     20.3.2. Dynamic Memory Management
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#two-categories">
       20.3.2.1. Two categories
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#main-calls">
       20.3.2.2. Main calls
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#explore-with-an-example">
     20.3.3. Explore with an example
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#man-malloc">
       20.3.3.1. man malloc
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#libc-typically-c-wrappers-for-os-system-calls-and-support-for-making-syscalls-directly-in-c">
       20.3.3.2. LibC typically C wrappers for OS system calls and support for making syscalls directly in C
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#you-can-use-mmap-and-munmap-in-your-c-programs-to-manage-your-own-dynamic-address-space-mapping">
       20.3.3.3. You can use
       <code class="docutils literal notranslate">
        <span class="pre">
         mmap
        </span>
       </code>
       and
       <code class="docutils literal notranslate">
        <span class="pre">
         munmap
        </span>
       </code>
       in your C programs to manage your own  dynamic address space mapping
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#under-the-covers-malloc-free-and-friends">
     20.3.4. Under the covers
     <code class="docutils literal notranslate">
      <span class="pre">
       malloc
      </span>
     </code>
     ,
     <code class="docutils literal notranslate">
      <span class="pre">
       free
      </span>
     </code>
     and friends
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#important-points-about-dynamic-memory">
       20.3.4.1. Important points about dynamic memory
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#layers">
   20.4. Layers
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#io-is-no-different">
   20.5. IO is no different
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#lowest-layer-is-wrappers-for-core-unix-i-o-routines">
     20.5.1. Lowest layer is wrappers for core UNIX I/O routines
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#a-layer-up-buffered-and-formated-i-o">
     20.5.2. A layer up buffered and formated I/O
    </a>
   </li>
  </ul>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section class="tex2jax_ignore mathjax_ignore" id="uc-sls-lecture-20-using-libc-to-access-the-os-and-escape-the-confines-our-process">
<h1><span class="section-number">20. </span>UC-SLS Lecture 20 : Using LibC to access the OS and escape the confines our process<a class="headerlink" href="#uc-sls-lecture-20-using-libc-to-access-the-os-and-escape-the-confines-our-process" title="Permalink to this headline">#</a></h1>
<ul class="simple">
<li><p>Preliminaries</p>
<ul>
<li><p>libraries</p></li>
<li><p>Standard library : <code class="docutils literal notranslate"><span class="pre">libc.a[.so]</span></code></p></li>
</ul>
</li>
<li><p>Address Space management:</p>
<ul>
<li><p>dynamic memory for data items: <code class="docutils literal notranslate"><span class="pre">malloc</span></code> and <code class="docutils literal notranslate"><span class="pre">free</span></code></p></li>
<li><p>more powerfully control using <code class="docutils literal notranslate"><span class="pre">mmap</span></code> and <code class="docutils literal notranslate"><span class="pre">munmap</span></code></p></li>
</ul>
</li>
<li><p>I/O</p>
<ul>
<li><p>low-level file descriptor based: <code class="docutils literal notranslate"><span class="pre">open</span></code>, <code class="docutils literal notranslate"><span class="pre">read</span></code>, <code class="docutils literal notranslate"><span class="pre">write</span></code>, <code class="docutils literal notranslate"><span class="pre">close</span></code>, <code class="docutils literal notranslate"><span class="pre">getc</span></code>, <code class="docutils literal notranslate"><span class="pre">getchar</span></code>, <code class="docutils literal notranslate"><span class="pre">gets</span></code>, <code class="docutils literal notranslate"><span class="pre">putc</span></code>, <code class="docutils literal notranslate"><span class="pre">putchar</span></code>, <code class="docutils literal notranslate"><span class="pre">puts</span></code></p></li>
<li><p>Formatted and Buffered IO: <code class="docutils literal notranslate"><span class="pre">fopen</span></code>, <code class="docutils literal notranslate"><span class="pre">fread</span></code>, <code class="docutils literal notranslate"><span class="pre">fwrite</span></code>, <code class="docutils literal notranslate"><span class="pre">fclose</span></code>, <code class="docutils literal notranslate"><span class="pre">fprintf</span></code>/<code class="docutils literal notranslate"><span class="pre">printf</span></code>,
<code class="docutils literal notranslate"><span class="pre">fscanf</span></code>/<code class="docutils literal notranslate"><span class="pre">scanf</span></code>, <code class="docutils literal notranslate"><span class="pre">fgetc</span></code>, <code class="docutils literal notranslate"><span class="pre">fgets</span></code>, <code class="docutils literal notranslate"><span class="pre">fputs</span></code>, <code class="docutils literal notranslate"><span class="pre">fputc</span></code>, <code class="docutils literal notranslate"><span class="pre">fgetpos</span></code>, <code class="docutils literal notranslate"><span class="pre">fsetpos</span></code>, <code class="docutils literal notranslate"><span class="pre">fseek</span></code>, <code class="docutils literal notranslate"><span class="pre">fflush</span></code>,</p></li>
</ul>
</li>
</ul>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<ul class="simple">
<li><p>create a directory <code class="docutils literal notranslate"><span class="pre">mkdir</span> <span class="pre">libc;</span> <span class="pre">cd</span> <span class="pre">libc</span></code></p></li>
<li><p>copy examples</p></li>
<li><p>add a <code class="docutils literal notranslate"><span class="pre">Makefile</span></code> to automate assembling and linking</p>
<ul>
<li><p>we are going run the commands by hand this time to highlight the details</p></li>
</ul>
</li>
<li><p>normally you would want to track everything in git</p></li>
</ul>
<script type="application/vnd.jupyter.widget-view+json">
{"model_id": "37411379c8f74370b38d6f53fc17c362", "version_major": 2, "version_minor": 0}
</script></div>
</div>
<section id="overview">
<h2><span class="section-number">20.1. </span>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">#</a></h2>
<center>
<img src="../images/LibC-001.png" >
</center><center>
<img src="../images/LibC-002.png" >
</center><center>
<img src="../images/LibC-003.png" >
</center></section>
<section id="preliminaries">
<h2><span class="section-number">20.2. </span>Preliminaries<a class="headerlink" href="#preliminaries" title="Permalink to this headline">#</a></h2>
<section id="sdks">
<h3><span class="section-number">20.2.1. </span>SDKs<a class="headerlink" href="#sdks" title="Permalink to this headline">#</a></h3>
<p>Developers package and distribute “native” code for an specific computer and OS as collection of documentation, header files, and libraries.  We often call this collection a Software Development ToolKit (SDK).  The functions and types defined in an SDK are often referred to as an Application Programmer Interface.</p>
<section id="documentation">
<h4><span class="section-number">20.2.1.1. </span>Documentation<a class="headerlink" href="#documentation" title="Permalink to this headline">#</a></h4>
<p>Developers provide documentation that explains the API in terms of the functions and types that their code provides for your use.  Traditionally on UNIX systems this comprises as set of man pages.</p>
<p><strong>man complex</strong></p>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id": "4b73b74a81f54591adc755b1c23b97de", "version_major": 2, "version_minor": 0}
</script></div>
</div>
<p><strong>man cexp</strong></p>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id": "9f081d0d9bc446f883bbf6a3643c7ac9", "version_major": 2, "version_minor": 0}
</script></div>
</div>
<p><strong>Documentation tells us</strong></p>
<ol class="simple">
<li><p>Tells us how to use the functions, macros and types of a SDK</p></li>
<li><p>What header files we must include in our source to call particular functions</p></li>
<li><p>What libraries we must include when we link</p></li>
</ol>
</section>
<section id="header-files">
<h4><span class="section-number">20.2.1.2. </span>Header files<a class="headerlink" href="#header-files" title="Permalink to this headline">#</a></h4>
<p>As we discussed to generate assembly for a call to a function compiler must have</p>
<ol class="simple">
<li><p>A declaration for a function</p></li>
<li><p>Definitions for all types it requires</p></li>
<li><p>and possibly preprocessor macros</p></li>
</ol>
<p>The headers files of a library provide these things so that your code can compile with calls to the libraries functions. Remember we use preprocessor <code class="docutils literal notranslate"><span class="pre">#include</span> <span class="pre">&lt;file&gt;</span></code> to substitute the contents of <code class="docutils literal notranslate"><span class="pre">&lt;file&gt;</span></code> into our own source.</p>
</section>
<section id="libraries">
<h4><span class="section-number">20.2.1.3. </span>Libraries<a class="headerlink" href="#libraries" title="Permalink to this headline">#</a></h4>
<p>Libraries are a new kind of file for us. The are “archives” of object files.</p>
<p>Two main types on</p>
<ol class="simple">
<li><p>Static archive eg. Linux: <code class="docutils literal notranslate"><span class="pre">libm.a</span></code></p></li>
<li><p>Dynamic archive eg. Linux: <code class="docutils literal notranslate"><span class="pre">libm.so</span></code></p></li>
</ol>
<p>Statically linking requires static library and dynamic linking requires dynamic</p>
<section id="linker-and-libraries">
<h5><span class="section-number">20.2.1.3.1. </span>Linker and Libraries<a class="headerlink" href="#linker-and-libraries" title="Permalink to this headline">#</a></h5>
<p>We can add a library when we link our executable by passing the right parameters to the linker.</p>
<p>eg.  <code class="docutils literal notranslate"><span class="pre">-l&lt;name&gt;</span></code> will tell linker to use objects from <code class="docutils literal notranslate"><span class="pre">lib&lt;name&gt;.a</span></code> or <code class="docutils literal notranslate"><span class="pre">lib&lt;name&gt;.so</span></code> if it needs too</p>
<p>Specifically the library file contains a table of contents with all the object files and symbols define in those objects.  If your our object files reference a symbol that you do not define the linker will look for it in the table of contents.  If there is an object file in the library that defines the symbol it will include the necessary object file as if you had specified as one of your object files.</p>
</section>
</section>
<section id="example">
<h4><span class="section-number">20.2.1.4. </span>Example<a class="headerlink" href="#example" title="Permalink to this headline">#</a></h4>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<p><font size="6rem"><b>C: cexp.c</p>
<div style="width:100%; height:100%; font-size:inherit; overflow: auto;" >
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;math.h&gt;</span><span class="c1"> /* for atan */</span><span class="cp"></span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;complex.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdlib.h&gt;</span><span class="cp"></span>

<span class="kt">int</span><span class="w"></span>
<span class="nf">main</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">**</span><span class="n">argv</span><span class="p">)</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="kt">double</span><span class="w"> </span><span class="n">y</span><span class="o">=</span><span class="mf">1.0</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">argc</span><span class="o">&gt;</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="n">y</span><span class="o">=</span><span class="n">atof</span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span><span class="w"></span>
<span class="w">  </span><span class="kt">double</span><span class="w"> </span><span class="n">pi</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">atan</span><span class="p">(</span><span class="n">y</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="kt">double</span><span class="w"> </span><span class="k">complex</span><span class="w"> </span><span class="n">z</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cexp</span><span class="p">(</span><span class="n">I</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">pi</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;%f + %f * i</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">creal</span><span class="p">(</span><span class="n">z</span><span class="p">),</span><span class="w"> </span><span class="n">cimag</span><span class="p">(</span><span class="n">z</span><span class="p">));</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

</pre></div>
</div>
</div>
</font><script type="application/vnd.jupyter.widget-view+json">
{"model_id": "bfd9bc8591394bc184b7aa5eee24ebad", "version_major": 2, "version_minor": 0}
</script></div>
</div>
<p><strong>How does the preprocessor and linker know where to find things</strong></p>
<p>The compiler driver, in our case <code class="docutils literal notranslate"><span class="pre">gcc</span></code> passes parameters to both the preprocessor and linker</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">-I</span> <span class="pre">&lt;dir&gt;</span></code> tells preprocessor to look for header files in <code class="docutils literal notranslate"><span class="pre">&lt;dir&gt;</span></code></p>
<ul>
<li><p>several standard directories are specified by default</p>
<ul>
<li><p>eg. <code class="docutils literal notranslate"><span class="pre">-I/usr/include</span></code></p></li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id": "bcbd754d28e84275a230b3cb79b0f084", "version_major": 2, "version_minor": 0}
</script></div>
</div>
<ul class="simple">
<li><p>We can look at look at these files if we want to see the details</p></li>
</ul>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">-L</span> <span class="pre">&lt;dir&gt;</span></code> similarly tells the linker to look for libraries in <code class="docutils literal notranslate"><span class="pre">&lt;dir&gt;</span></code></p>
<ul>
<li><p>several standard directories are specified by default</p>
<ul>
<li><p>eg. <code class="docutils literal notranslate"><span class="pre">-L/usr/lib/x86_64-linux-gnu</span></code></p></li>
</ul>
</li>
</ul>
</li>
</ul>
<p><strong>The linker map file lets us see all the .o’s that got linked in and where they came from</strong></p>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id": "920ac2575cb9435fb3455beb415f5bc6", "version_major": 2, "version_minor": 0}
</script></div>
</div>
<p><strong><code class="docutils literal notranslate"><span class="pre">ar</span></code> is a tool for working with static libraries</strong>
see <code class="docutils literal notranslate"><span class="pre">man</span> <span class="pre">ar</span></code> for details</p>
<p>We can use it to list the table of contents of the <code class="docutils literal notranslate"><span class="pre">.o</span></code> in the archive</p>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id": "d563c8f49193432087b2dbfbf28c5da2", "version_major": 2, "version_minor": 0}
</script></div>
</div>
<p>We can even use it to extract a member (just like the linker does when linking)</p>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id": "26dedc054d4949d8a9d2f3e2a65aa9ef", "version_major": 2, "version_minor": 0}
</script></div>
</div>
<p><strong>And no surprise it is an object file like the kind we have been creating</strong></p>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id": "37064654ade84645a39f9a89d31843c9", "version_major": 2, "version_minor": 0}
</script></div>
</div>
<p><strong>What about <code class="docutils literal notranslate"><span class="pre">_start</span></code>, <code class="docutils literal notranslate"><span class="pre">atof</span></code> and <code class="docutils literal notranslate"><span class="pre">fprintf</span></code></strong></p>
<ul class="simple">
<li><p>Where did they come from????</p>
<ul>
<li><p>Lets look for them in the map file</p>
<ul>
<li><p>map file can even tell not only what file a symbol came from but also where it ends up being placed in the memory image of our executable</p></li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id": "20b5737fd99d46c29e0b601d024d39c2", "version_major": 2, "version_minor": 0}
</script></div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id": "ac6f6107204d4a22add87afb43b3fc0f", "version_major": 2, "version_minor": 0}
</script></div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id": "1cb17c9f1f7a4bc9a5145728ef3dacf4", "version_major": 2, "version_minor": 0}
</script></div>
</div>
</section>
<section id="defaults">
<h4><span class="section-number">20.2.1.5. </span>Defaults<a class="headerlink" href="#defaults" title="Permalink to this headline">#</a></h4>
<ul class="simple">
<li><p>C compiler driver ensures that we always link against a set of standard object files and libraries</p></li>
<li><p>But the core one is <code class="docutils literal notranslate"><span class="pre">libc</span></code> – The C standard library!</p></li>
</ul>
</section>
</section>
</section>
<section id="c-standard-library-libc-lc">
<h2><span class="section-number">20.3. </span>C Standard Library <code class="docutils literal notranslate"><span class="pre">libc</span></code> (<code class="docutils literal notranslate"><span class="pre">-lc</span></code>)<a class="headerlink" href="#c-standard-library-libc-lc" title="Permalink to this headline">#</a></h2>
<p>The C standard library was developed at the same time as the core language</p>
<ul class="simple">
<li><p>There are standards a C compiler and C standard library implementation can conform too</p>
<ul>
<li><p>eg. <a class="reference external" href="https://www.iso.org/standard/17782.html">https://www.iso.org/standard/17782.html</a></p></li>
</ul>
</li>
<li><p>The gnu C compiler <code class="docutils literal notranslate"><span class="pre">gcc</span></code> has its associated gnu libc <code class="docutils literal notranslate"><span class="pre">glibc</span></code></p>
<ul>
<li><p><a class="reference external" href="https://www.gnu.org/software/libc/manual/html_node/index.html">https://www.gnu.org/software/libc/manual/html_node/index.html</a></p></li>
<li><p>These are the standards it conforms too</p>
<ul>
<li><p><a class="reference external" href="https://www.gnu.org/software/libc/manual/html_node/Standards-and-Portability.html#Standards-and-Portability">https://www.gnu.org/software/libc/manual/html_node/Standards-and-Portability.html#Standards-and-Portability</a></p></li>
</ul>
</li>
</ul>
</li>
</ul>
<section id="id1">
<h3><span class="section-number">20.3.1. </span>Overview<a class="headerlink" href="#id1" title="Permalink to this headline">#</a></h3>
<ul class="simple">
<li><p>The C Standard library is very large and provides many categories of routines</p></li>
</ul>
<ul class="simple">
<li><p>We will only consider a small fraction of its functionality
2. Dynamic Memory Management
3. Basic overview of IO</p></li>
</ul>
</section>
<section id="dynamic-memory-management">
<h3><span class="section-number">20.3.2. </span>Dynamic Memory Management<a class="headerlink" href="#dynamic-memory-management" title="Permalink to this headline">#</a></h3>
<ul class="simple">
<li><p><a class="reference external" href="https://www.gnu.org/software/libc/manual/html_mono/libc.html#Memory-Concepts">https://www.gnu.org/software/libc/manual/html_mono/libc.html#Memory-Concepts</a></p></li>
<li><p><a class="reference external" href="https://www.gnu.org/software/libc/manual/html_mono/libc.html#Dynamic-Memory-Allocation">https://www.gnu.org/software/libc/manual/html_mono/libc.html#Dynamic-Memory-Allocation</a></p>
<ul>
<li><p>C Language has no built in support for Dynamic Memory Variables</p></li>
<li><p>other than automatics (function local variables and function parameters)</p></li>
<li><p>Must use system calls to get and remove memory from the process</p></li>
<li><p>Must use pointers to track it</p></li>
</ul>
</li>
</ul>
<section id="two-categories">
<h4><span class="section-number">20.3.2.1. </span>Two categories<a class="headerlink" href="#two-categories" title="Permalink to this headline">#</a></h4>
<p>LibC provides routines that give a programmer the ability to dynamically allocate memory</p>
<ul class="simple">
<li><p>The Memory Allocator (<a class="reference external" href="https://www.gnu.org/software/libc/manual/html_mono/libc.html#The-GNU-Allocator">https://www.gnu.org/software/libc/manual/html_mono/libc.html#The-GNU-Allocator</a>)</p>
<ul>
<li><p>It calls the OS system calls for the programmer</p>
<ul>
<li><p>There is a lot of subtlety to implementing a high performance memory allocator</p></li>
</ul>
</li>
<li><p>Basic idea is</p>
<ol class="simple">
<li><p>The allocator code in libc <code class="docutils literal notranslate"><span class="pre">malloc</span></code> and <code class="docutils literal notranslate"><span class="pre">free</span></code> are called by the application code</p></li>
<li><p>These routines allocate large chucks of memory from the OS</p></li>
<li><p>They then break these large chucks down handing out pieces as requested by <code class="docutils literal notranslate"><span class="pre">malloc</span></code> calls</p></li>
<li><p>And coaleasing pieces back into the chucks when <code class="docutils literal notranslate"><span class="pre">free</span></code> is called</p></li>
<li><p>If large requests are made the libc routines call OS to create a separate mappings for these</p></li>
<li><p>Similarly if these large requests are freed they immediately free them to the OS</p></li>
</ol>
</li>
</ul>
</li>
<li><p>Directly calling <code class="docutils literal notranslate"><span class="pre">mmap</span></code> or <code class="docutils literal notranslate"><span class="pre">brk</span></code></p></li>
</ul>
</section>
<section id="main-calls">
<h4><span class="section-number">20.3.2.2. </span>Main calls<a class="headerlink" href="#main-calls" title="Permalink to this headline">#</a></h4>
<ul class="simple">
<li><p><a class="reference external" href="https://www.gnu.org/software/libc/manual/html_node/Summary-of-Malloc.html#Summary-of-Malloc">https://www.gnu.org/software/libc/manual/html_node/Summary-of-Malloc.html#Summary-of-Malloc</a></p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="o">*</span><span class="n">malloc</span> <span class="p">(</span><span class="n">size_t</span> <span class="n">size</span><span class="p">)</span>
<span class="o">//</span> <span class="n">Allocate</span> <span class="n">a</span> <span class="n">block</span> <span class="n">of</span> <span class="n">size</span> <span class="nb">bytes</span><span class="o">.</span> <span class="n">See</span> <span class="n">Basic</span> <span class="n">Allocation</span><span class="o">.</span>

<span class="n">void</span> <span class="n">free</span> <span class="p">(</span><span class="n">void</span> <span class="o">*</span><span class="n">addr</span><span class="p">)</span>
<span class="o">//</span> <span class="n">Free</span> <span class="n">a</span> <span class="n">block</span> <span class="n">previously</span> <span class="n">allocated</span> <span class="n">by</span> <span class="n">malloc</span><span class="o">.</span> <span class="n">See</span> <span class="n">Freeing</span> <span class="n">after</span> <span class="n">Malloc</span><span class="o">.</span>

<span class="n">void</span> <span class="o">*</span><span class="n">realloc</span> <span class="p">(</span><span class="n">void</span> <span class="o">*</span><span class="n">addr</span><span class="p">,</span> <span class="n">size_t</span> <span class="n">size</span><span class="p">)</span>
<span class="o">//</span> <span class="n">Make</span> <span class="n">a</span> <span class="n">block</span> <span class="n">previously</span> <span class="n">allocated</span> <span class="n">by</span> <span class="n">malloc</span> <span class="n">larger</span> <span class="ow">or</span> <span class="n">smaller</span><span class="p">,</span> <span class="n">possibly</span> <span class="n">by</span> <span class="n">copying</span> <span class="n">it</span> <span class="n">to</span> <span class="n">a</span> <span class="n">new</span> <span class="n">location</span><span class="o">.</span> <span class="n">See</span> <span class="n">Changing</span> <span class="n">Block</span> <span class="n">Size</span><span class="o">.</span>

<span class="n">void</span> <span class="o">*</span><span class="n">reallocarray</span> <span class="p">(</span><span class="n">void</span> <span class="o">*</span><span class="n">ptr</span><span class="p">,</span> <span class="n">size_t</span> <span class="n">nmemb</span><span class="p">,</span> <span class="n">size_t</span> <span class="n">size</span><span class="p">)</span>
<span class="o">//</span> <span class="n">Change</span> <span class="n">the</span> <span class="n">size</span> <span class="n">of</span> <span class="n">a</span> <span class="n">block</span> <span class="n">previously</span> <span class="n">allocated</span> <span class="n">by</span> <span class="n">malloc</span> <span class="n">to</span> <span class="n">nmemb</span> <span class="o">*</span> <span class="n">size</span> <span class="nb">bytes</span> <span class="k">as</span> <span class="k">with</span> <span class="n">realloc</span><span class="o">.</span> <span class="n">See</span> <span class="n">Changing</span> <span class="n">Block</span> <span class="n">Size</span><span class="o">.</span>

<span class="n">void</span> <span class="o">*</span><span class="n">calloc</span> <span class="p">(</span><span class="n">size_t</span> <span class="n">count</span><span class="p">,</span> <span class="n">size_t</span> <span class="n">eltsize</span><span class="p">)</span>
<span class="o">//</span><span class="n">Allocate</span> <span class="n">a</span> <span class="n">block</span> <span class="n">of</span> <span class="n">count</span> <span class="o">*</span> <span class="n">eltsize</span> <span class="nb">bytes</span> <span class="n">using</span> <span class="n">malloc</span><span class="p">,</span> <span class="ow">and</span> <span class="nb">set</span> <span class="n">its</span> <span class="n">contents</span> <span class="n">to</span> <span class="n">zero</span><span class="o">.</span> <span class="n">See</span> <span class="n">Allocating</span> <span class="n">Cleared</span> <span class="n">Space</span><span class="o">.</span>

<span class="n">void</span> <span class="o">*</span><span class="n">valloc</span> <span class="p">(</span><span class="n">size_t</span> <span class="n">size</span><span class="p">)</span>
<span class="o">//</span> <span class="n">Allocate</span> <span class="n">a</span> <span class="n">block</span> <span class="n">of</span> <span class="n">size</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">starting</span> <span class="n">on</span> <span class="n">a</span> <span class="n">page</span> <span class="n">boundary</span><span class="o">.</span> <span class="n">See</span> <span class="n">Aligned</span> <span class="n">Memory</span> <span class="n">Blocks</span><span class="o">.</span>

<span class="n">void</span> <span class="o">*</span><span class="n">aligned_alloc</span> <span class="p">(</span><span class="n">size_t</span> <span class="n">size</span><span class="p">,</span> <span class="n">size_t</span> <span class="n">alignment</span><span class="p">)</span>
<span class="o">//</span> <span class="n">Allocate</span> <span class="n">a</span> <span class="n">block</span> <span class="n">of</span> <span class="n">size</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">starting</span> <span class="n">on</span> <span class="n">an</span> <span class="n">address</span> <span class="n">that</span> <span class="ow">is</span> <span class="n">a</span> <span class="n">multiple</span> <span class="n">of</span> <span class="n">alignment</span><span class="o">.</span> <span class="n">See</span> <span class="n">Aligned</span> <span class="n">Memory</span> <span class="n">Blocks</span><span class="o">.</span>

<span class="nb">int</span> <span class="n">posix_memalign</span> <span class="p">(</span><span class="n">void</span> <span class="o">**</span><span class="n">memptr</span><span class="p">,</span> <span class="n">size_t</span> <span class="n">alignment</span><span class="p">,</span> <span class="n">size_t</span> <span class="n">size</span><span class="p">)</span>
<span class="o">//</span> <span class="n">Allocate</span> <span class="n">a</span> <span class="n">block</span> <span class="n">of</span> <span class="n">size</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">starting</span> <span class="n">on</span> <span class="n">an</span> <span class="n">address</span> <span class="n">that</span> <span class="ow">is</span> <span class="n">a</span> <span class="n">multiple</span> <span class="n">of</span> <span class="n">alignment</span><span class="o">.</span> <span class="n">See</span> <span class="n">Aligned</span> <span class="n">Memory</span> <span class="n">Blocks</span><span class="o">.</span>

<span class="n">void</span> <span class="o">*</span><span class="n">memalign</span> <span class="p">(</span><span class="n">size_t</span> <span class="n">size</span><span class="p">,</span> <span class="n">size_t</span> <span class="n">boundary</span><span class="p">)</span>
<span class="o">//</span><span class="n">Allocate</span> <span class="n">a</span> <span class="n">block</span> <span class="n">of</span> <span class="n">size</span> <span class="nb">bytes</span><span class="p">,</span> <span class="n">starting</span> <span class="n">on</span> <span class="n">an</span> <span class="n">address</span> <span class="n">that</span> <span class="ow">is</span> <span class="n">a</span> <span class="n">multiple</span> <span class="n">of</span> <span class="n">boundary</span><span class="o">.</span> <span class="n">See</span> <span class="n">Aligned</span> <span class="n">Memory</span> <span class="n">Blocks</span><span class="o">.</span>

<span class="nb">int</span> <span class="n">mallopt</span> <span class="p">(</span><span class="nb">int</span> <span class="n">param</span><span class="p">,</span> <span class="nb">int</span> <span class="n">value</span><span class="p">)</span>
<span class="o">//</span> <span class="n">Adjust</span> <span class="n">a</span> <span class="n">tunable</span> <span class="n">parameter</span><span class="o">.</span> <span class="n">See</span> <span class="n">Malloc</span> <span class="n">Tunable</span> <span class="n">Parameters</span><span class="o">.</span>

<span class="nb">int</span> <span class="n">mcheck</span> <span class="p">(</span><span class="n">void</span> <span class="p">(</span><span class="o">*</span><span class="n">abortfn</span><span class="p">)</span> <span class="p">(</span><span class="n">void</span><span class="p">))</span>
<span class="o">//</span> <span class="n">Tell</span> <span class="n">malloc</span> <span class="n">to</span> <span class="n">perform</span> <span class="n">occasional</span> <span class="n">consistency</span> <span class="n">checks</span> <span class="n">on</span> <span class="n">dynamically</span> <span class="n">allocated</span> <span class="n">memory</span><span class="p">,</span> <span class="ow">and</span> <span class="n">to</span> <span class="n">call</span> <span class="n">abortfn</span> <span class="n">when</span> <span class="n">an</span> <span class="n">inconsistency</span> <span class="ow">is</span> <span class="n">found</span><span class="o">.</span> <span class="n">See</span> <span class="n">Heap</span> <span class="n">Consistency</span> <span class="n">Checking</span><span class="o">.</span>

<span class="n">struct</span> <span class="n">mallinfo2</span> <span class="n">mallinfo2</span> <span class="p">(</span><span class="n">void</span><span class="p">)</span>
<span class="o">//</span> <span class="n">Return</span> <span class="n">information</span> <span class="n">about</span> <span class="n">the</span> <span class="n">current</span> <span class="n">dynamic</span> <span class="n">memory</span> <span class="n">usage</span><span class="o">.</span> <span class="n">See</span> <span class="n">Statistics</span> <span class="n">of</span> <span class="n">Malloc</span><span class="o">.</span>
</pre></div>
</div>
</section>
</section>
<section id="explore-with-an-example">
<h3><span class="section-number">20.3.3. </span>Explore with an example<a class="headerlink" href="#explore-with-an-example" title="Permalink to this headline">#</a></h3>
<section id="man-malloc">
<h4><span class="section-number">20.3.3.1. </span>man malloc<a class="headerlink" href="#man-malloc" title="Permalink to this headline">#</a></h4>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">TermShellCmd</span><span class="p">(</span><span class="s2">&quot;man 3 malloc&quot;</span><span class="p">,</span> <span class="n">noposttext</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">markdown</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id": "7eb2d23055194baaa5267693854c7f40", "version_major": 2, "version_minor": 0}
</script></div>
</div>
<p><strong>What does this code do?</strong></p>
<ul class="simple">
<li><p>What do you think will happen?</p></li>
</ul>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<p><font size='6.5em'><b>C: dynmem.c</p>
<div style="width:100%; height:100%; font-size:inherit; overflow: auto;" >
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdlib.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;string.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;unistd.h&gt;</span><span class="cp"></span>
<span class="c1">// Use debugger to explore what happens</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">**</span><span class="n">argv</span><span class="p">)</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">cptr</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4096</span><span class="p">;</span><span class="w"></span>

<span class="w">  </span><span class="n">cptr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">malloc</span><span class="p">(</span><span class="n">n</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="n">memset</span><span class="p">(</span><span class="n">cptr</span><span class="p">,</span><span class="w"> </span><span class="mh">0xaa</span><span class="p">,</span><span class="w"> </span><span class="n">n</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="n">free</span><span class="p">(</span><span class="n">cptr</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

</pre></div>
</div>
</div>
</font><script type="application/vnd.jupyter.widget-view+json">
{"model_id": "b62b9fde62444bf6855e5ff5ce6a3eb9", "version_major": 2, "version_minor": 0}
</script></div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<p><b>Debug</b></p>
</div>
</div>
<ul class="simple">
<li><p>demonstrate strace ./dynmem</p>
<ul>
<li><p>what do you expect to see
Use debugger</p></li>
<li><p>use <code class="docutils literal notranslate"><span class="pre">jump</span></code> command and <code class="docutils literal notranslate"><span class="pre">set</span> <span class="pre">var</span> <span class="pre">n=X</span></code> to execute several malloc calls</p></li>
<li><p>explore /proc/<pid>/maps</p></li>
<li><p>set breakpoints on malloc, sbrk, brk,</p>
<ul>
<li><p>disass - brk easy see syscall</p></li>
<li><p>break on syscall instruction - look at maps</p></li>
<li><p>use where to show call chains</p></li>
</ul>
</li>
</ul>
</li>
<li><p>then add below and use strace</p></li>
</ul>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdlib.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;unistd.h&gt;</span><span class="cp"></span>

<span class="c1">// Use debugger to explore what happens                                            </span>

<span class="kt">int</span><span class="w"></span>
<span class="nf">main</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">**</span><span class="n">argv</span><span class="p">)</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">cptr</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="kt">char</span><span class="w"> </span><span class="n">c</span><span class="p">;</span><span class="w"></span>

<span class="w">  </span><span class="n">read</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">c</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span><span class="w"></span>

<span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4096</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="n">cptr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">malloc</span><span class="p">(</span><span class="n">n</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="n">read</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">c</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span><span class="w"></span>

<span class="w">  </span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1024</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">1024</span><span class="w">  </span><span class="o">*</span><span class="w"> </span><span class="mi">1024</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="n">cptr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">malloc</span><span class="p">(</span><span class="n">n</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="n">read</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">c</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span><span class="w"></span>

<span class="w">  </span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1024</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">1024</span><span class="w">  </span><span class="o">*</span><span class="w"> </span><span class="mi">1024</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="n">cptr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">malloc</span><span class="p">(</span><span class="n">n</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="n">read</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">c</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span><span class="w"></span>

<span class="w">  </span><span class="n">free</span><span class="p">(</span><span class="n">cptr</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="libc-typically-c-wrappers-for-os-system-calls-and-support-for-making-syscalls-directly-in-c">
<h4><span class="section-number">20.3.3.2. </span>LibC typically C wrappers for OS system calls and support for making syscalls directly in C<a class="headerlink" href="#libc-typically-c-wrappers-for-os-system-calls-and-support-for-making-syscalls-directly-in-c" title="Permalink to this headline">#</a></h4>
<p><strong>libc provides C wrappers for system calls</strong></p>
<ul class="simple">
<li><p>Wrappers expose C function interface for system calls of the OS</p></li>
<li><p>You can lookup C version and simply call it like any other C function call</p>
<ul>
<li><p>implementation in libc takes care of all the assembly stuff for you</p>
<ul>
<li><p>putting parameters in the right registers</p></li>
<li><p>filling in the system call number</p></li>
</ul>
</li>
</ul>
</li>
</ul>
<p><strong>man 2 syscalls</strong></p>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id": "9b26363b53994a8e9c7198cb7050c25c", "version_major": 2, "version_minor": 0}
</script></div>
</div>
<p><strong>man 2 brk</strong></p>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id": "2128fc07df0644e299a6dfdb4c4c4ed4", "version_major": 2, "version_minor": 0}
</script></div>
</div>
<p><strong>glibc also has support for using the syscall instruction in C</strong></p>
<p><strong>man 2 syscall</strong></p>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id": "1d742aaebb6b4f73988c7a0dd0d7ebbc", "version_major": 2, "version_minor": 0}
</script></div>
</div>
<p><strong>In the following example we will call brk directly rather than letting malloc call it</strong></p>
<p>Do not do this – you can screw up malloc only for example purposes</p>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<p><font size="6rem"><b>C: dynmemsyscalls.c</p>
<div style="width:107em; height:100%; font-size:inherit; overflow: auto;" >
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdlib.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;string.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;unistd.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sys/syscall.h&gt;</span><span class="c1">   /* For SYS_xxx definitions */</span><span class="cp"></span>

<span class="kt">int</span><span class="w"></span>
<span class="nf">main</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">**</span><span class="n">argv</span><span class="p">)</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">cptr</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4096</span><span class="p">;</span><span class="w"></span>

<span class="w">  </span><span class="n">cptr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">malloc</span><span class="p">(</span><span class="n">n</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="n">memset</span><span class="p">(</span><span class="n">cptr</span><span class="p">,</span><span class="w"> </span><span class="mh">0xaa</span><span class="p">,</span><span class="w"> </span><span class="n">n</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="n">free</span><span class="p">(</span><span class="n">cptr</span><span class="p">);</span><span class="w"></span>

<span class="w">  </span><span class="n">cptr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sbrk</span><span class="p">(</span><span class="mi">4096</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="n">memset</span><span class="p">(</span><span class="n">cptr</span><span class="p">,</span><span class="w"> </span><span class="mh">0xaa</span><span class="p">,</span><span class="w"> </span><span class="mi">4096</span><span class="p">);</span><span class="w"></span>

<span class="w">  </span><span class="n">cptr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="n">syscall</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span><span class="w"> </span><span class="c1">// hardcode syscall number</span>
<span class="w">  </span><span class="n">syscall</span><span class="p">(</span><span class="n">SYS_brk</span><span class="p">,</span><span class="w"> </span><span class="n">cptr</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">4096</span><span class="p">);</span><span class="w">  </span><span class="c1">// use constant from header</span>
<span class="w">  </span><span class="n">memset</span><span class="p">(</span><span class="n">cptr</span><span class="p">,</span><span class="w"> </span><span class="mh">0xaa</span><span class="p">,</span><span class="w"> </span><span class="mi">4096</span><span class="p">);</span><span class="w"></span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

</pre></div>
</div>
</div>
</font><script type="application/vnd.jupyter.widget-view+json">
{"model_id": "44bc265d6fab44539dff69135fd3448d", "version_major": 2, "version_minor": 0}
</script></div>
</div>
</section>
<section id="you-can-use-mmap-and-munmap-in-your-c-programs-to-manage-your-own-dynamic-address-space-mapping">
<h4><span class="section-number">20.3.3.3. </span>You can use <code class="docutils literal notranslate"><span class="pre">mmap</span></code> and <code class="docutils literal notranslate"><span class="pre">munmap</span></code> in your C programs to manage your own  dynamic address space mapping<a class="headerlink" href="#you-can-use-mmap-and-munmap-in-your-c-programs-to-manage-your-own-dynamic-address-space-mapping" title="Permalink to this headline">#</a></h4>
<p><strong>man mmap</strong></p>
<p>It is very powerful but also has a lot of parameters</p>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id": "7f038c67f1b64f11b6151ec5543f4d96", "version_major": 2, "version_minor": 0}
</script></div>
</div>
</section>
</section>
<section id="under-the-covers-malloc-free-and-friends">
<h3><span class="section-number">20.3.4. </span>Under the covers <code class="docutils literal notranslate"><span class="pre">malloc</span></code>, <code class="docutils literal notranslate"><span class="pre">free</span></code> and friends<a class="headerlink" href="#under-the-covers-malloc-free-and-friends" title="Permalink to this headline">#</a></h3>
<ul class="simple">
<li><p>are calling <code class="docutils literal notranslate"><span class="pre">brk</span></code>, <code class="docutils literal notranslate"><span class="pre">mmap</span></code> and <code class="docutils literal notranslate"><span class="pre">munmap</span></code></p></li>
<li><p>you and your code does not need to deal with the details</p>
<ul>
<li><p>rather a simpler interface that is consistent across CPU types and OS</p>
<ul>
<li><p>get me <code class="docutils literal notranslate"><span class="pre">n</span></code> bytes of memory and return a pointer to it</p></li>
<li><p>give back memory at this address</p></li>
</ul>
</li>
</ul>
</li>
</ul>
<section id="important-points-about-dynamic-memory">
<h4><span class="section-number">20.3.4.1. </span>Important points about dynamic memory<a class="headerlink" href="#important-points-about-dynamic-memory" title="Permalink to this headline">#</a></h4>
<p>What is wrong with this code?</p>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<p><font size="6rem"><b>C: badmsgcode.c</p>
<div style="width:100%; height:100%; font-size:inherit; overflow: auto;" >
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdlib.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;assert.h&gt;</span><span class="cp"></span>

<span class="c1">// waits for request message to arrive: returns length in bytes and updates integer pointed to</span>
<span class="c1">// by idPtr with id of request</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">getRequest</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="n">idPtr</span><span class="p">);</span><span class="w"></span>
<span class="c1">// read the data of request with id into memory pointed to by buffer</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">readRequestData</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">buffer</span><span class="p">);</span><span class="w"></span>
<span class="c1">// process request with id and data in memory pointed to by buffer, frees buffer when done</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">processRequest</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">buffer</span><span class="p">);</span><span class="w"></span>

<span class="kt">int</span><span class="w"></span>
<span class="nf">main</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">**</span><span class="n">argv</span><span class="p">)</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">n</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="n">id_ptr</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">msg_buffer</span><span class="p">;</span><span class="w"></span>

<span class="w">  </span><span class="c1">// my server loop</span>
<span class="w">  </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">id_ptr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">malloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="p">));</span><span class="w"></span>
<span class="w">    </span><span class="n">assert</span><span class="p">(</span><span class="n">id_ptr</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getRequest</span><span class="p">(</span><span class="n">id_ptr</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">msg_buffer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">malloc</span><span class="p">(</span><span class="n">n</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">assert</span><span class="p">(</span><span class="n">msg_buffer</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">readRequestData</span><span class="p">(</span><span class="o">*</span><span class="n">id_ptr</span><span class="p">,</span><span class="w"> </span><span class="n">msg_buffer</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">processRequest</span><span class="p">(</span><span class="o">*</span><span class="n">id_ptr</span><span class="p">,</span><span class="w"> </span><span class="n">msg_buffer</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="w">  </span><span class="c1">// should never get here</span>
<span class="w">  </span><span class="n">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

</pre></div>
</div>
</div>
</font><script type="application/vnd.jupyter.widget-view+json">
{"model_id": "5c5d117a39d44f9e85f21c83a56dc90a", "version_major": 2, "version_minor": 0}
</script></div>
</div>
<ul class="simple">
<li><p>this is why higher level languages have a lot of code to hide the details of dynamic memory</p>
<ul>
<li><p>reference counting</p></li>
<li><p>garbage collectors</p></li>
</ul>
</li>
</ul>
</section>
</section>
</section>
<section id="layers">
<h2><span class="section-number">20.4. </span>Layers<a class="headerlink" href="#layers" title="Permalink to this headline">#</a></h2>
<p>What we see is a general pattern of layering</p>
<ul class="simple">
<li><p>Assembly is at the bottom</p></li>
<li><p>OS kernel provides an assembly interface to its routines</p>
<ul>
<li><p>x86 Linux system calls invoked via <code class="docutils literal notranslate"><span class="pre">syscall</span></code> instruction and the right register values</p></li>
</ul>
</li>
<li><p>lowest layer of libc routines provides wrappers</p></li>
<li><p>The other lib routines build on these to add more functionality eg. <code class="docutils literal notranslate"><span class="pre">malloc</span></code> and <code class="docutils literal notranslate"><span class="pre">free</span></code></p>
<ul>
<li><p>thus programmers and C applications are isolated from details of OS syscalls</p>
<ul>
<li><p>simply need to learn libc which is ported to each computer OS pair</p></li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
<section id="io-is-no-different">
<h2><span class="section-number">20.5. </span>IO is no different<a class="headerlink" href="#io-is-no-different" title="Permalink to this headline">#</a></h2>
<section id="lowest-layer-is-wrappers-for-core-unix-i-o-routines">
<h3><span class="section-number">20.5.1. </span>Lowest layer is wrappers for core UNIX I/O routines<a class="headerlink" href="#lowest-layer-is-wrappers-for-core-unix-i-o-routines" title="Permalink to this headline">#</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">open</span></code>, <code class="docutils literal notranslate"><span class="pre">close</span></code>, <code class="docutils literal notranslate"><span class="pre">read</span></code>, <code class="docutils literal notranslate"><span class="pre">write</span></code>, <code class="docutils literal notranslate"><span class="pre">dup</span></code>, <code class="docutils literal notranslate"><span class="pre">mkdir</span></code>, <code class="docutils literal notranslate"><span class="pre">exec</span></code>, <code class="docutils literal notranslate"><span class="pre">mmap</span></code></p></li>
</ul>
</section>
<section id="a-layer-up-buffered-and-formated-i-o">
<h3><span class="section-number">20.5.2. </span>A layer up buffered and formated I/O<a class="headerlink" href="#a-layer-up-buffered-and-formated-i-o" title="Permalink to this headline">#</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">fopen</span></code>, <code class="docutils literal notranslate"><span class="pre">fclose</span></code>, <code class="docutils literal notranslate"><span class="pre">fread</span></code>, <code class="docutils literal notranslate"><span class="pre">fwrite</span></code>,</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">fprintf</span></code>/<code class="docutils literal notranslate"><span class="pre">printf</span></code>, <code class="docutils literal notranslate"><span class="pre">fscanf</span></code>/<code class="docutils literal notranslate"><span class="pre">scanf</span></code></p></li>
</ul>
</section>
</section>
</section>


<script type="application/vnd.jupyter.widget-state+json">
{"state": {"04da76d8da4a474b83abcdbf2cc7e840": {"model_module": "@jupyter-widgets/base", "model_module_version": "1.2.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": "1px solid black", "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": "100%", "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": "scroll", "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "1cb17c9f1f7a4bc9a5145728ef3dacf4": {"model_module": "@jupyter-widgets/output", "model_module_version": "1.0.0", "model_name": "OutputModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/output", "_model_module_version": "1.0.0", "_model_name": "OutputModel", "_view_count": null, "_view_module": "@jupyter-widgets/output", "_view_module_version": "1.0.0", "_view_name": "OutputView", "layout": "IPY_MODEL_222a9305b74c4e3ea040c634cab8c8fe", "msg_id": "", "outputs": [{"name": "stdout", "output_type": "stream", "text": "$ grep -B 1 ' fprintf$' cexp.map\n .text          0x000000000047af90       0xb7 /usr/lib/gcc/x86_64-linux-gnu/9/../../../x86_64-linux-gnu/libc.a(fprintf.o)\r\n                0x000000000047af90               \u001b[01;31m\u001b[K fprintf\u001b[m\u001b[K\r\n"}]}}, "1d742aaebb6b4f73988c7a0dd0d7ebbc": {"model_module": "@jupyter-widgets/output", "model_module_version": "1.0.0", "model_name": "OutputModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/output", "_model_module_version": "1.0.0", "_model_name": "OutputModel", "_view_count": null, "_view_module": "@jupyter-widgets/output", "_view_module_version": "1.0.0", "_view_name": "OutputView", "layout": "IPY_MODEL_77b204dc65254d369d4af78a3361148e", "msg_id": "", "outputs": [{"name": "stdout", "output_type": "stream", "text": "$ man 2 syscall\nSYSCALL(2)                 Linux Programmer's Manual                SYSCALL(2)\r\n\r\nN\bNA\bAM\bME\bE\r\n       syscall - indirect system call\r\n\r\nS\bSY\bYN\bNO\bOP\bPS\bSI\bIS\bS\r\n       #\b#i\bin\bnc\bcl\blu\bud\bde\be <\b<u\bun\bni\bis\bst\btd\bd.\b.h\bh>\b>\r\n       #\b#i\bin\bnc\bcl\blu\bud\bde\be <\b<s\bsy\bys\bs/\b/s\bsy\bys\bsc\bca\bal\bll\bl.\b.h\bh>\b>   /* For SYS_xxx definitions */\r\n\r\n       l\blo\bon\bng\bg s\bsy\bys\bsc\bca\bal\bll\bl(\b(l\blo\bon\bng\bg _\bn_\bu_\bm_\bb_\be_\br,\b, .\b..\b..\b.)\b);\b;\r\n\r\n   Feature Test Macro Requirements for glibc (see f\bfe\bea\bat\btu\bur\bre\be_\b_t\bte\bes\bst\bt_\b_m\bma\bac\bcr\bro\bos\bs(7)):\r\n       s\bsy\bys\bsc\bca\bal\bll\bl():\r\n           Since glibc 2.19:\r\n               _DEFAULT_SOURCE\r\n           Before glibc 2.19:\r\n               _BSD_SOURCE || _SVID_SOURCE\r\n\r\nD\bDE\bES\bSC\bCR\bRI\bIP\bPT\bTI\bIO\bON\bN\r\n       s\bsy\bys\bsc\bca\bal\bll\bl()  is  a  small  library  function that invokes the system call\r\n       whose assembly language interface has the  specified  _\bn_\bu_\bm_\bb_\be_\br  with  the\r\n       specified  arguments.  Employing s\bsy\bys\bsc\bca\bal\bll\bl() is useful, for example, when\r\n       invoking a system call that has no wrapper function in the C library.\r\n\r\n       s\bsy\bys\bsc\bca\bal\bll\bl() saves CPU registers before making the system  call,  restores\r\n       the  registers  upon  return from the system call, and stores any error\r\n       code returned by the system call in e\ber\brr\brn\bno\bo(3) if an error occurs.\r\n\r\n       Symbolic constants for system call numbers can be found in  the  header\r\n       file _\b<_\bs_\by_\bs_\b/_\bs_\by_\bs_\bc_\ba_\bl_\bl_\b._\bh_\b>.\r\n\r\nR\bRE\bET\bTU\bUR\bRN\bN V\bVA\bAL\bLU\bUE\bE\r\n       The  return value is defined by the system call being invoked.  In gen\u2010\r\n       eral, a 0 return value indicates success.  A -1 return value  indicates\r\n       an error, and an error code is stored in _\be_\br_\br_\bn_\bo.\r\n\r\nN\bNO\bOT\bTE\bES\bS\r\n       s\bsy\bys\bsc\bca\bal\bll\bl() first appeared in 4BSD.\r\n\r\n   A\bAr\brc\bch\bhi\bit\bte\bec\bct\btu\bur\bre\be-\b-s\bsp\bpe\bec\bci\bif\bfi\bic\bc r\bre\beq\bqu\bui\bir\bre\bem\bme\ben\bnt\bts\bs\r\n       Each architecture ABI has its own requirements on how system call argu\u2010\r\n       ments are passed to the kernel.  For system calls  that  have  a  glibc\r\n       wrapper (e.g., most system calls), glibc handles the details of copying\r\n       arguments to the right registers in a manner suitable for the architec\u2010\r\n       ture.   However, when using s\bsy\bys\bsc\bca\bal\bll\bl() to make a system call, the caller\r\n       might need to handle architecture-dependent details;  this  requirement\r\n       is most commonly encountered on certain 32-bit architectures.\r\n\r\n       For  example,  on  the  ARM  architecture Embedded ABI (EABI), a 64-bit\r\n       value (e.g., _\bl_\bo_\bn_\bg _\bl_\bo_\bn_\bg) must be  aligned  to  an  even  register  pair.\r\n       Thus,  using  s\bsy\bys\bsc\bca\bal\bll\bl()  instead  of the wrapper provided by glibc, the\r\n       r\bre\bea\bad\bda\bah\bhe\bea\bad\bd() system call would be invoked as follows on the  ARM  archi\u2010\r\n       tecture with the EABI in little endian mode:\r\n\r\n           syscall(SYS_readahead, fd, 0,\r\n                   (unsigned int) (offset & 0xFFFFFFFF),\r\n                   (unsigned int) (offset >> 32),\r\n                   count);\r\n\r\n       Since  the  offset  argument is 64 bits, and the first argument (_\bf_\bd) is\r\n       passed in _\br_\b0, the caller must manually split and align the 64-bit value\r\n       so  that it is passed in the _\br_\b2/_\br_\b3 register pair.  That means inserting\r\n       a dummy value into _\br_\b1 (the second argument of 0).  Care  also  must  be\r\n       taken  so that the split follows endian conventions (according to the C\r\n       ABI for the platform).\r\n\r\n       Similar issues can occur on MIPS with  the  O32  ABI,  on  PowerPC  and\r\n       parisc with the 32-bit ABI, and on Xtensa.\r\n\r\n       Note  that  while the parisc C ABI also uses aligned register pairs, it\r\n       uses a shim layer to hide the issue from user space.\r\n\r\n       The  affected  system  calls   are   f\bfa\bad\bdv\bvi\bis\bse\be6\b64\b4_\b_6\b64\b4(2),   f\bft\btr\bru\bun\bnc\bca\bat\bte\be6\b64\b4(2),\r\n       p\bpo\bos\bsi\bix\bx_\b_f\bfa\bad\bdv\bvi\bis\bse\be(2),      p\bpr\bre\bea\bad\bd6\b64\b4(2),      p\bpw\bwr\bri\b"}]}}, "20b5737fd99d46c29e0b601d024d39c2": {"model_module": "@jupyter-widgets/output", "model_module_version": "1.0.0", "model_name": "OutputModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/output", "_model_module_version": "1.0.0", "_model_name": "OutputModel", "_view_count": null, "_view_module": "@jupyter-widgets/output", "_view_module_version": "1.0.0", "_view_name": "OutputView", "layout": "IPY_MODEL_ff0077e57d9f43e1b65c2ea01911605d", "msg_id": "", "outputs": [{"name": "stdout", "output_type": "stream", "text": "$ grep -B 1 ' _start$' cexp.map\n .text          0x0000000000401c00       0x35 /usr/lib/gcc/x86_64-linux-gnu/9/../../../x86_64-linux-gnu/crt1.o\r\n                0x0000000000401c00               \u001b[01;31m\u001b[K _start\u001b[m\u001b[K\r\n"}]}}, "2128fc07df0644e299a6dfdb4c4c4ed4": {"model_module": "@jupyter-widgets/output", "model_module_version": "1.0.0", "model_name": "OutputModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/output", "_model_module_version": "1.0.0", "_model_name": "OutputModel", "_view_count": null, "_view_module": "@jupyter-widgets/output", "_view_module_version": "1.0.0", "_view_name": "OutputView", "layout": "IPY_MODEL_b0593ee428ba444498e5cfa685f0f1ed", "msg_id": "", "outputs": [{"name": "stdout", "output_type": "stream", "text": "$ man 2 brk\nBRK(2)                     Linux Programmer's Manual                    BRK(2)\r\n\r\nN\bNA\bAM\bME\bE\r\n       brk, sbrk - change data segment size\r\n\r\nS\bSY\bYN\bNO\bOP\bPS\bSI\bIS\bS\r\n       #\b#i\bin\bnc\bcl\blu\bud\bde\be <\b<u\bun\bni\bis\bst\btd\bd.\b.h\bh>\b>\r\n\r\n       i\bin\bnt\bt b\bbr\brk\bk(\b(v\bvo\boi\bid\bd *\b*_\ba_\bd_\bd_\br)\b);\b;\r\n\r\n       v\bvo\boi\bid\bd *\b*s\bsb\bbr\brk\bk(\b(i\bin\bnt\btp\bpt\btr\br_\b_t\bt _\bi_\bn_\bc_\br_\be_\bm_\be_\bn_\bt)\b);\b;\r\n\r\n   Feature Test Macro Requirements for glibc (see f\bfe\bea\bat\btu\bur\bre\be_\b_t\bte\bes\bst\bt_\b_m\bma\bac\bcr\bro\bos\bs(7)):\r\n\r\n       b\bbr\brk\bk(), s\bsb\bbr\brk\bk():\r\n           Since glibc 2.19:\r\n               _DEFAULT_SOURCE ||\r\n                   (_XOPEN_SOURCE >= 500) &&\r\n                   ! (_POSIX_C_SOURCE >= 200112L)\r\n           From glibc 2.12 to 2.19:\r\n               _BSD_SOURCE || _SVID_SOURCE ||\r\n                   (_XOPEN_SOURCE >= 500) &&\r\n                   ! (_POSIX_C_SOURCE >= 200112L)\r\n           Before glibc 2.12:\r\n               _BSD_SOURCE || _SVID_SOURCE || _XOPEN_SOURCE >= 500\r\n\r\nD\bDE\bES\bSC\bCR\bRI\bIP\bPT\bTI\bIO\bON\bN\r\n       b\bbr\brk\bk()  and  s\bsb\bbr\brk\bk()  change the location of the _\bp_\br_\bo_\bg_\br_\ba_\bm _\bb_\br_\be_\ba_\bk, which de\u2010\r\n       fines the end of the process's data segment (i.e., the program break is\r\n       the  first  location  after the end of the uninitialized data segment).\r\n       Increasing the program break has the effect of allocating memory to the\r\n       process; decreasing the break deallocates memory.\r\n\r\n       b\bbr\brk\bk()  sets the end of the data segment to the value specified by _\ba_\bd_\bd_\br,\r\n       when that value is reasonable, the system has enough  memory,  and  the\r\n       process does not exceed its maximum data size (see s\bse\bet\btr\brl\bli\bim\bmi\bit\bt(2)).\r\n\r\n       s\bsb\bbr\brk\bk() increments the program's data space by _\bi_\bn_\bc_\br_\be_\bm_\be_\bn_\bt bytes.  Calling\r\n       s\bsb\bbr\brk\bk() with an _\bi_\bn_\bc_\br_\be_\bm_\be_\bn_\bt of 0 can be used to find the current  location\r\n       of the program break.\r\n\r\nR\bRE\bET\bTU\bUR\bRN\bN V\bVA\bAL\bLU\bUE\bE\r\n       On success, b\bbr\brk\bk() returns zero.  On error, -1 is returned, and _\be_\br_\br_\bn_\bo is\r\n       set to E\bEN\bNO\bOM\bME\bEM\bM.\r\n\r\n       On success, s\bsb\bbr\brk\bk() returns the previous program break.  (If  the  break\r\n       was  increased,  then this value is a pointer to the start of the newly\r\n       allocated memory).  On error, _\b(_\bv_\bo_\bi_\bd _\b*_\b) _\b-_\b1 is returned, and _\be_\br_\br_\bn_\bo is set\r\n       to E\bEN\bNO\bOM\bME\bEM\bM.\r\n\r\nC\bCO\bON\bNF\bFO\bOR\bRM\bMI\bIN\bNG\bG T\bTO\bO\r\n       4.3BSD; SUSv1, marked LEGACY in SUSv2, removed in POSIX.1-2001.\r\n\r\nN\bNO\bOT\bTE\bES\bS\r\n       Avoid  using  b\bbr\brk\bk() and s\bsb\bbr\brk\bk(): the m\bma\bal\bll\blo\boc\bc(3) memory allocation package\r\n       is the portable and comfortable way of allocating memory.\r\n\r\n       Various systems use various types for the argument of  s\bsb\bbr\brk\bk().   Common\r\n       are _\bi_\bn_\bt, _\bs_\bs_\bi_\bz_\be_\b__\bt, _\bp_\bt_\br_\bd_\bi_\bf_\bf_\b__\bt, _\bi_\bn_\bt_\bp_\bt_\br_\b__\bt.\r\n\r\n   C\bC l\bli\bib\bbr\bra\bar\bry\by/\b/k\bke\ber\brn\bne\bel\bl d\bdi\bif\bff\bfe\ber\bre\ben\bnc\bce\bes\bs\r\n       The  return value described above for b\bbr\brk\bk() is the behavior provided by\r\n       the glibc wrapper function for the Linux b\bbr\brk\bk() system call.   (On  most\r\n       other  implementations,  the  return value from b\bbr\brk\bk() is the same; this\r\n       return value was also specified in SUSv2.)  However, the  actual  Linux\r\n       system  call returns the new program break on success.  On failure, the\r\n       system call returns the current break.  The glibc wrapper function does\r\n       some  work  (i.e.,  checks  whether the new break is less than _\ba_\bd_\bd_\br) to\r\n       provide the 0 and -1 return values described above.\r\n\r\n       On Linux, s\bsb\bbr\brk\bk() is implemented as a library  function  that  uses  the\r\n       b\bbr\brk\bk()  system  call,  and does some internal bookkeeping so that it can\r\n       return the old break value.\r\n\r\nS\bSE\bEE\bE A\bAL\bLS\bSO\bO\r\n       e\bex\bxe\bec\bcv\bve\be(2), g\bge\bet\btr\brl\bli\bim\bmi\bit\bt(2), e\ben\bnd\bd(3), m\bma\bal\bll\blo\boc\bc(3)\r\n\r\nC\bCO\bOL\bLO\bOP\bPH\bHO\bON\bN\r\n       This page is part of release 5.05 of the Linux  _\bm_\b"}]}}, "222a9305b74c4e3ea040c634cab8c8fe": {"model_module": "@jupyter-widgets/base", "model_module_version": "1.2.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": "1px solid black", "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": "100%", "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": "scroll", "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "26dedc054d4949d8a9d2f3e2a65aa9ef": {"model_module": "@jupyter-widgets/output", "model_module_version": "1.0.0", "model_name": "OutputModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/output", "_model_module_version": "1.0.0", "_model_name": "OutputModel", "_view_count": null, "_view_module": "@jupyter-widgets/output", "_view_module_version": "1.0.0", "_view_name": "OutputView", "layout": "IPY_MODEL_d3c3cc3ce82643f08ffe9ab6b1bcd576", "msg_id": "", "outputs": [{"name": "stdout", "output_type": "stream", "text": "$ ar x /usr/lib/x86_64-linux-gnu/libm-2.31.a s_cexp.o; ls -l s_cexp.o\n-rw-r--r--. 1 jovyan root 3792 Feb 21 03:21 s_cexp.o\r\n"}]}}, "2a6f9d19891d45fb8b109e6c2a0d7799": {"model_module": "@jupyter-widgets/output", "model_module_version": "1.0.0", "model_name": "OutputModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/output", "_model_module_version": "1.0.0", "_model_name": "OutputModel", "_view_count": null, "_view_module": "@jupyter-widgets/output", "_view_module_version": "1.0.0", "_view_name": "OutputView", "layout": "IPY_MODEL_c6bae63a82e6494a8f6a76e269d3750d", "msg_id": "", "outputs": [{"name": "stdout", "output_type": "stream", "text": "\ngcc  -g  -Os -static -Xlinker -Map=cexp.map cexp.c -o cexp -lm\r\n"}]}}, "37064654ade84645a39f9a89d31843c9": {"model_module": "@jupyter-widgets/output", "model_module_version": "1.0.0", "model_name": "OutputModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/output", "_model_module_version": "1.0.0", "_model_name": "OutputModel", "_view_count": null, "_view_module": "@jupyter-widgets/output", "_view_module_version": "1.0.0", "_view_name": "OutputView", "layout": "IPY_MODEL_9393533ef20a4981ad88d1218d087cf3", "msg_id": "", "outputs": [{"name": "stdout", "output_type": "stream", "text": "$ objdump -d -Mintel s_cexp.o | head -20\n\r\ns_cexp.o:     file format elf64-x86-64\r\n\r\n\r\nDisassembly of section .text:\r\n\r\n0000000000000000 <__cexp>:\r\n   0:\tf3 0f 1e fa          \tendbr64 \r\n   4:\t53                   \tpush   rbx\r\n   5:\t66 0f 28 d0          \tmovapd xmm2,xmm0\r\n   9:\t66 0f 28 e9          \tmovapd xmm5,xmm1\r\n   d:\t66 0f 28 c1          \tmovapd xmm0,xmm1\r\n  11:\t66 0f 28 f2          \tmovapd xmm6,xmm2\r\n  15:\t48 83 ec 40          \tsub    rsp,0x40\r\n  19:\tf3 0f 7e 1d 00 00 00 \tmovq   xmm3,QWORD PTR [rip+0x0]        # 21 <__cexp+0x21>\r\n  20:\t00 \r\n  21:\t64 48 8b 04 25 28 00 \tmov    rax,QWORD PTR fs:0x28\r\n  28:\t00 00 \r\n  2a:\t48 89 44 24 38       \tmov    QWORD PTR [rsp+0x38],rax\r\n  2f:\t31 c0                \txor    eax,eax\r\n"}]}}, "37411379c8f74370b38d6f53fc17c362": {"model_module": "@jupyter-widgets/output", "model_module_version": "1.0.0", "model_name": "OutputModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/output", "_model_module_version": "1.0.0", "_model_name": "OutputModel", "_view_count": null, "_view_module": "@jupyter-widgets/output", "_view_module_version": "1.0.0", "_view_name": "OutputView", "layout": "IPY_MODEL_cce28c1d8fdc46288089d0106baf8218", "msg_id": "", "outputs": [{"name": "stdout", "output_type": "stream", "text": "$ ls /home/jovyan/libc\nMakefile  badmsgcode.c  cexp.c  dynmem.c  dynmemsyscalls.c\r\n$ "}]}}, "44bc265d6fab44539dff69135fd3448d": {"model_module": "@jupyter-widgets/output", "model_module_version": "1.0.0", "model_name": "OutputModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/output", "_model_module_version": "1.0.0", "_model_name": "OutputModel", "_view_count": null, "_view_module": "@jupyter-widgets/output", "_view_module_version": "1.0.0", "_view_name": "OutputView", "layout": "IPY_MODEL_7bfe638485324eca9225e511c1c3aec6", "msg_id": "", "outputs": [{"name": "stdout", "output_type": "stream", "text": "\ngcc -Werror  -g dynmemsyscalls.c -o dynmemsyscalls\r\n"}]}}, "4b73b74a81f54591adc755b1c23b97de": {"model_module": "@jupyter-widgets/output", "model_module_version": "1.0.0", "model_name": "OutputModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/output", "_model_module_version": "1.0.0", "_model_name": "OutputModel", "_view_count": null, "_view_module": "@jupyter-widgets/output", "_view_module_version": "1.0.0", "_view_name": "OutputView", "layout": "IPY_MODEL_c2e4fe4faa584fa1a69b1a8fef4857d1", "msg_id": "", "outputs": [{"name": "stdout", "output_type": "stream", "text": "$ man complex\nCOMPLEX(7)                 Linux Programmer's Manual                COMPLEX(7)\r\n\r\nN\bNA\bAM\bME\bE\r\n       complex - basics of complex mathematics\r\n\r\nS\bSY\bYN\bNO\bOP\bPS\bSI\bIS\bS\r\n       #\b#i\bin\bnc\bcl\blu\bud\bde\be <\b<c\bco\bom\bmp\bpl\ble\bex\bx.\b.h\bh>\b>\r\n\r\nD\bDE\bES\bSC\bCR\bRI\bIP\bPT\bTI\bIO\bON\bN\r\n       Complex  numbers  are  numbers of the form z = a+b*i, where a and b are\r\n       real numbers and i = sqrt(-1), so that i*i = -1.\r\n\r\n       There are other ways to represent that number.  The pair (a,b) of  real\r\n       numbers  may be viewed as a point in the plane, given by X- and Y-coor\u2010\r\n       dinates.  This same point may also be described by giving the  pair  of\r\n       real  numbers (r,phi), where r is the distance to the origin O, and phi\r\n       the angle between the X-axis and the line Oz.  Now z =  r*exp(i*phi)  =\r\n       r*(cos(phi)+i*sin(phi)).\r\n\r\n       The basic operations are defined on z = a+b*i and w = c+d*i as:\r\n\r\n       a\bad\bdd\bdi\bit\bti\bio\bon\bn:\b: z\bz+\b+w\bw =\b= (\b(a\ba+\b+c\bc)\b) +\b+ (\b(b\bb+\b+d\bd)\b)*\b*i\bi\r\n\r\n       m\bmu\bul\blt\bti\bip\bpl\bli\bic\bca\bat\bti\bio\bon\bn:\b: z\bz*\b*w\bw =\b= (\b(a\ba*\b*c\bc -\b- b\bb*\b*d\bd)\b) +\b+ (\b(a\ba*\b*d\bd +\b+ b\bb*\b*c\bc)\b)*\b*i\bi\r\n\r\n       d\bdi\biv\bvi\bis\bsi\bio\bon\bn:\b: z\bz/\b/w\bw =\b= (\b((\b(a\ba*\b*c\bc +\b+ b\bb*\b*d\bd)\b)/\b/(\b(c\bc*\b*c\bc +\b+ d\bd*\b*d\bd)\b))\b) +\b+ (\b((\b(b\bb*\b*c\bc -\b- a\ba*\b*d\bd)\b)/\b/(\b(c\bc*\b*c\bc +\b+ d\bd*\b*d\bd)\b))\b)*\b*i\bi\r\n\r\n       Nearly  all math function have a complex counterpart but there are some\r\n       complex-only functions.\r\n\r\nE\bEX\bXA\bAM\bMP\bPL\bLE\bE\r\n       Your C-compiler can work with complex numbers if it  supports  the  C99\r\n       standard.  Link with _\b-_\bl_\bm.  The imaginary unit is represented by I.\r\n\r\n       /* check that exp(i * pi) == -1 */\r\n       #include <math.h>        /* for atan */\r\n       #include <stdio.h>\r\n       #include <complex.h>\r\n\r\n       int\r\n       main(void)\r\n       {\r\n           double pi = 4 * atan(1.0);\r\n           double complex z = cexp(I * pi);\r\n           printf(\"%f + %f * i\\n\", creal(z), cimag(z));\r\n       }\r\n\r\nS\bSE\bEE\bE A\bAL\bLS\bSO\bO\r\n       c\bca\bab\bbs\bs(3),  c\bca\bac\bco\bos\bs(3),  c\bca\bac\bco\bos\bsh\bh(3), c\bca\bar\brg\bg(3), c\bca\bas\bsi\bin\bn(3), c\bca\bas\bsi\bin\bnh\bh(3), c\bca\bat\bta\ban\bn(3),\r\n       c\bca\bat\bta\ban\bnh\bh(3), c\bcc\bco\bos\bs(3), c\bcc\bco\bos\bsh\bh(3),  c\bce\ber\brf\bf(3),  c\bce\bex\bxp\bp(3),  c\bce\bex\bxp\bp2\b2(3),  c\bci\bim\bma\bag\bg(3),\r\n       c\bcl\blo\bog\bg(3),  c\bcl\blo\bog\bg1\b10\b0(3),  c\bcl\blo\bog\bg2\b2(3),  c\bco\bon\bnj\bj(3),  c\bcp\bpo\bow\bw(3), c\bcp\bpr\bro\boj\bj(3), c\bcr\bre\bea\bal\bl(3),\r\n       c\bcs\bsi\bin\bn(3), c\bcs\bsi\bin\bnh\bh(3), c\bcs\bsq\bqr\brt\bt(3), c\bct\bta\ban\bn(3), c\bct\bta\ban\bnh\bh(3)\r\n\r\nC\bCO\bOL\bLO\bOP\bPH\bHO\bON\bN\r\n       This page is part of release 5.05 of the Linux  _\bm_\ba_\bn_\b-_\bp_\ba_\bg_\be_\bs  project.   A\r\n       description  of  the project, information about reporting bugs, and the\r\n       latest    version    of    this    page,    can     be     found     at\r\n       https://www.kernel.org/doc/man-pages/.\r\n\r\n                                  2019-03-06                        COMPLEX(7)\r\n"}]}}, "542841a422994834aa4c7a89b8c9395b": {"model_module": "@jupyter-widgets/base", "model_module_version": "1.2.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": "1px solid black", "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": "100%", "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": "scroll", "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "59d0c0393390467592558139d5baee6e": {"model_module": "@jupyter-widgets/base", "model_module_version": "1.2.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": "1px solid black", "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": "100%", "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": "scroll", "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "5bcf025ba1bf4400991417f4c13df009": {"model_module": "@jupyter-widgets/base", "model_module_version": "1.2.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": "1px solid black", "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": "100%", "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": "scroll", "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "5c5d117a39d44f9e85f21c83a56dc90a": {"model_module": "@jupyter-widgets/output", "model_module_version": "1.0.0", "model_name": "OutputModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/output", "_model_module_version": "1.0.0", "_model_name": "OutputModel", "_view_count": null, "_view_module": "@jupyter-widgets/output", "_view_module_version": "1.0.0", "_view_name": "OutputView", "layout": "IPY_MODEL_e6fc8dba5e774c0ab4052444b0c3d4f9", "msg_id": "", "outputs": [{"name": "stdout", "output_type": "stream", "text": "\ngcc  -g -Werror -c  badmsgcode.c -o badmsgcode.o\r\n"}]}}, "66e1e231409f418b8b6c5b0ebc62901f": {"model_module": "@jupyter-widgets/base", "model_module_version": "1.2.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": "1px solid black", "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": "100%", "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": "scroll", "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "77b204dc65254d369d4af78a3361148e": {"model_module": "@jupyter-widgets/base", "model_module_version": "1.2.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": "1px solid black", "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": "100%", "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": "scroll", "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "7bfe638485324eca9225e511c1c3aec6": {"model_module": "@jupyter-widgets/base", "model_module_version": "1.2.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": "1px solid black", "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": "100%", "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": "scroll", "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "7eb2d23055194baaa5267693854c7f40": {"model_module": "@jupyter-widgets/output", "model_module_version": "1.0.0", "model_name": "OutputModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/output", "_model_module_version": "1.0.0", "_model_name": "OutputModel", "_view_count": null, "_view_module": "@jupyter-widgets/output", "_view_module_version": "1.0.0", "_view_name": "OutputView", "layout": "IPY_MODEL_04da76d8da4a474b83abcdbf2cc7e840", "msg_id": "", "outputs": [{"name": "stdout", "output_type": "stream", "text": "$ man 3 malloc\nMALLOC(3)                  Linux Programmer's Manual                 MALLOC(3)\r\n\r\nN\bNA\bAM\bME\bE\r\n       malloc, free, calloc, realloc - allocate and free dynamic memory\r\n\r\nS\bSY\bYN\bNO\bOP\bPS\bSI\bIS\bS\r\n       #\b#i\bin\bnc\bcl\blu\bud\bde\be <\b<s\bst\btd\bdl\bli\bib\bb.\b.h\bh>\b>\r\n\r\n       v\bvo\boi\bid\bd *\b*m\bma\bal\bll\blo\boc\bc(\b(s\bsi\biz\bze\be_\b_t\bt _\bs_\bi_\bz_\be)\b);\b;\r\n       v\bvo\boi\bid\bd f\bfr\bre\bee\be(\b(v\bvo\boi\bid\bd _\b*_\bp_\bt_\br)\b);\b;\r\n       v\bvo\boi\bid\bd *\b*c\bca\bal\bll\blo\boc\bc(\b(s\bsi\biz\bze\be_\b_t\bt _\bn_\bm_\be_\bm_\bb,\b, s\bsi\biz\bze\be_\b_t\bt _\bs_\bi_\bz_\be)\b);\b;\r\n       v\bvo\boi\bid\bd *\b*r\bre\bea\bal\bll\blo\boc\bc(\b(v\bvo\boi\bid\bd _\b*_\bp_\bt_\br,\b, s\bsi\biz\bze\be_\b_t\bt _\bs_\bi_\bz_\be)\b);\b;\r\n       v\bvo\boi\bid\bd *\b*r\bre\bea\bal\bll\blo\boc\bca\bar\brr\bra\bay\by(\b(v\bvo\boi\bid\bd _\b*_\bp_\bt_\br,\b, s\bsi\biz\bze\be_\b_t\bt _\bn_\bm_\be_\bm_\bb,\b, s\bsi\biz\bze\be_\b_t\bt _\bs_\bi_\bz_\be)\b);\b;\r\n\r\n   Feature Test Macro Requirements for glibc (see f\bfe\bea\bat\btu\bur\bre\be_\b_t\bte\bes\bst\bt_\b_m\bma\bac\bcr\bro\bos\bs(7)):\r\n\r\n       r\bre\bea\bal\bll\blo\boc\bca\bar\brr\bra\bay\by():\r\n           Since glibc 2.29:\r\n               _DEFAULT_SOURCE\r\n           Glibc 2.28 and earlier:\r\n               _GNU_SOURCE\r\n\r\nD\bDE\bES\bSC\bCR\bRI\bIP\bPT\bTI\bIO\bON\bN\r\n       The m\bma\bal\bll\blo\boc\bc() function allocates _\bs_\bi_\bz_\be bytes and returns a pointer to the\r\n       allocated memory.  _\bT_\bh_\be _\bm_\be_\bm_\bo_\br_\by _\bi_\bs _\bn_\bo_\bt _\bi_\bn_\bi_\bt_\bi_\ba_\bl_\bi_\bz_\be_\bd.  If _\bs_\bi_\bz_\be is  0,  then\r\n       m\bma\bal\bll\blo\boc\bc()  returns either NULL, or a unique pointer value that can later\r\n       be successfully passed to f\bfr\bre\bee\be().\r\n\r\n       The f\bfr\bre\bee\be() function frees the memory space pointed  to  by  _\bp_\bt_\br,  which\r\n       must  have  been  returned by a previous call to m\bma\bal\bll\blo\boc\bc(), c\bca\bal\bll\blo\boc\bc(), or\r\n       r\bre\bea\bal\bll\blo\boc\bc().  Otherwise, or if _\bf_\br_\be_\be_\b(_\bp_\bt_\br_\b) has already been called  before,\r\n       undefined behavior occurs.  If _\bp_\bt_\br is NULL, no operation is performed.\r\n\r\n       The  c\bca\bal\bll\blo\boc\bc()  function allocates memory for an array of _\bn_\bm_\be_\bm_\bb elements\r\n       of _\bs_\bi_\bz_\be bytes each and returns a pointer to the allocated memory.   The\r\n       memory  is  set  to zero.  If _\bn_\bm_\be_\bm_\bb or _\bs_\bi_\bz_\be is 0, then c\bca\bal\bll\blo\boc\bc() returns\r\n       either NULL, or a unique pointer value that can later  be  successfully\r\n       passed to f\bfr\bre\bee\be().  If the multiplication of _\bn_\bm_\be_\bm_\bb and _\bs_\bi_\bz_\be would result\r\n       in integer overflow, then c\bca\bal\bll\blo\boc\bc() returns an error.  By  contrast,  an\r\n       integer  overflow  would  not be detected in the following call to m\bma\bal\bl\u2010\b\u2010\r\n       l\blo\boc\bc(), with the result that an incorrectly sized block of memory  would\r\n       be allocated:\r\n\r\n           malloc(nmemb * size);\r\n\r\n       The  r\bre\bea\bal\bll\blo\boc\bc() function changes the size of the memory block pointed to\r\n       by _\bp_\bt_\br to _\bs_\bi_\bz_\be bytes.  The contents will be unchanged in the range from\r\n       the start of the region up to the minimum of the old and new sizes.  If\r\n       the new size is larger than the old size, the added memory will _\bn_\bo_\bt  be\r\n       initialized.   If  _\bp_\bt_\br  is  NULL,  then  the call is equivalent to _\bm_\ba_\bl_\b\u2010\r\n       _\bl_\bo_\bc_\b(_\bs_\bi_\bz_\be_\b), for all values of _\bs_\bi_\bz_\be; if _\bs_\bi_\bz_\be is equal to zero, and _\bp_\bt_\br is\r\n       not  NULL,  then  the  call  is equivalent to _\bf_\br_\be_\be_\b(_\bp_\bt_\br_\b).  Unless _\bp_\bt_\br is\r\n       NULL, it must have been returned by an earlier call to  m\bma\bal\bll\blo\boc\bc(),  c\bca\bal\bl\u2010\b\u2010\r\n       l\blo\boc\bc(),  or r\bre\bea\bal\bll\blo\boc\bc().  If the area pointed to was moved, a _\bf_\br_\be_\be_\b(_\bp_\bt_\br_\b) is\r\n       done.\r\n\r\n       The r\bre\bea\bal\bll\blo\boc\bca\bar\brr\bra\bay\by() function  changes  the  size  of  the  memory  block\r\n       pointed  to  by  _\bp_\bt_\br to be large enough for an array of _\bn_\bm_\be_\bm_\bb elements,\r\n       each of which is _\bs_\bi_\bz_\be bytes.  It is equivalent to the call\r\n\r\n               realloc(ptr, nmemb * size);\r\n\r\n       However, unlike that r\bre\bea\bal\bll\blo\boc\bc() call, r\bre\bea\bal\bll\blo\boc\bca\bar\brr\bra\bay\by() fails safely in the\r\n"}]}}, "7f038c67f1b64f11b6151ec5543f4d96": {"model_module": "@jupyter-widgets/output", "model_module_version": "1.0.0", "model_name": "OutputModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/output", "_model_module_version": "1.0.0", "_model_name": "OutputModel", "_view_count": null, "_view_module": "@jupyter-widgets/output", "_view_module_version": "1.0.0", "_view_name": "OutputView", "layout": "IPY_MODEL_542841a422994834aa4c7a89b8c9395b", "msg_id": "", "outputs": [{"name": "stdout", "output_type": "stream", "text": "$ man 2 mmap|head -40\nMMAP(2)                    Linux Programmer's Manual                   MMAP(2)\r\n\r\nNAME\r\n       mmap, munmap - map or unmap files or devices into memory\r\n\r\nSYNOPSIS\r\n       #include <sys/mman.h>\r\n\r\n       void *mmap(void *addr, size_t length, int prot, int flags,\r\n                  int fd, off_t offset);\r\n       int munmap(void *addr, size_t length);\r\n\r\n       See NOTES for information on feature test macro requirements.\r\n\r\nDESCRIPTION\r\n       mmap()  creates a new mapping in the virtual address space of the call\u2010\r\n       ing process.  The starting address for the new mapping is specified  in\r\n       addr.   The  length argument specifies the length of the mapping (which\r\n       must be greater than 0).\r\n\r\n       If addr is NULL, then the kernel chooses the (page-aligned) address  at\r\n       which to create the mapping; this is the most portable method of creat\u2010\r\n       ing a new mapping.  If addr is not NULL, then the kernel takes it as  a\r\n       hint about where to place the mapping; on Linux, the kernel will pick a\r\n       nearby page boundary (but always above or equal to the value  specified\r\n       by /proc/sys/vm/mmap_min_addr) and attempt to create the mapping there.\r\n       If another mapping already exists there, the kernel picks a new address\r\n       that may or may not depend on the hint.  The address of the new mapping\r\n       is returned as the result of the call.\r\n\r\n       The contents of a file mapping (as opposed to an anonymous mapping; see\r\n       MAP_ANONYMOUS  below),  are  initialized using length bytes starting at\r\n       offset offset in the file (or other object) referred to by the file de\u2010\r\n       scriptor fd.  offset must be a multiple of the page size as returned by\r\n       sysconf(_SC_PAGE_SIZE).\r\n\r\n       After the mmap() call has returned, the file  descriptor,  fd,  can  be\r\n       closed immediately without invalidating the mapping.\r\n\r\n       The  prot  argument describes the desired memory protection of the map\u2010\r\n"}]}}, "890ddfede0014dafb613744a8a2a7525": {"model_module": "@jupyter-widgets/base", "model_module_version": "1.2.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": "1px solid black", "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": "100%", "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": "scroll", "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "920ac2575cb9435fb3455beb415f5bc6": {"model_module": "@jupyter-widgets/output", "model_module_version": "1.0.0", "model_name": "OutputModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/output", "_model_module_version": "1.0.0", "_model_name": "OutputModel", "_view_count": null, "_view_module": "@jupyter-widgets/output", "_view_module_version": "1.0.0", "_view_name": "OutputView", "layout": "IPY_MODEL_66e1e231409f418b8b6c5b0ebc62901f", "msg_id": "", "outputs": [{"name": "stdout", "output_type": "stream", "text": "$ head -20 cexp.map \nArchive member included to satisfy reference by file (symbol)\r\n\r\n/usr/lib/x86_64-linux-gnu/libm-2.31.a(s_atan.o)\r\n                              /tmp/cczWcnJy.o (atan)\r\n/usr/lib/x86_64-linux-gnu/libm-2.31.a(s_cexp.o)\r\n                              /tmp/cczWcnJy.o (cexp)\r\n/usr/lib/x86_64-linux-gnu/libm-2.31.a(mpa.o)\r\n                              /usr/lib/x86_64-linux-gnu/libm-2.31.a(s_atan.o) (__mp_dbl)\r\n/usr/lib/x86_64-linux-gnu/libm-2.31.a(mpatan.o)\r\n                              /usr/lib/x86_64-linux-gnu/libm-2.31.a(s_atan.o) (__mpatan)\r\n/usr/lib/x86_64-linux-gnu/libm-2.31.a(mpsqrt.o)\r\n                              /usr/lib/x86_64-linux-gnu/libm-2.31.a(mpatan.o) (__mpsqrt)\r\n/usr/lib/x86_64-linux-gnu/libm-2.31.a(s_atan-fma.o)\r\n                              /usr/lib/x86_64-linux-gnu/libm-2.31.a(s_atan.o) (__atan_fma)\r\n/usr/lib/x86_64-linux-gnu/libm-2.31.a(mpa-fma.o)\r\n                              /usr/lib/x86_64-linux-gnu/libm-2.31.a(s_atan-fma.o) (__dbl_mp_fma)\r\n/usr/lib/x86_64-linux-gnu/libm-2.31.a(mpatan-fma.o)\r\n                              /usr/lib/x86_64-linux-gnu/libm-2.31.a(s_atan-fma.o) (__mpatan_fma)\r\n/usr/lib/x86_64-linux-gnu/libm-2.31.a(mpsqrt-fma.o)\r\n                              /usr/lib/x86_64-linux-gnu/libm-2.31.a(mpatan-fma.o) (__mpsqrt_fma)\r\n"}]}}, "9393533ef20a4981ad88d1218d087cf3": {"model_module": "@jupyter-widgets/base", "model_module_version": "1.2.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": "1px solid black", "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": "100%", "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": "scroll", "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "9b26363b53994a8e9c7198cb7050c25c": {"model_module": "@jupyter-widgets/output", "model_module_version": "1.0.0", "model_name": "OutputModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/output", "_model_module_version": "1.0.0", "_model_name": "OutputModel", "_view_count": null, "_view_module": "@jupyter-widgets/output", "_view_module_version": "1.0.0", "_view_name": "OutputView", "layout": "IPY_MODEL_e2ba5e8a60ac4d57ad525673802f6c22", "msg_id": "", "outputs": [{"name": "stdout", "output_type": "stream", "text": "$ man 2 syscalls|head -80\nSYSCALLS(2)                Linux Programmer's Manual               SYSCALLS(2)\r\n\r\nNAME\r\n       syscalls - Linux system calls\r\n\r\nSYNOPSIS\r\n       Linux system calls.\r\n\r\nDESCRIPTION\r\n       The system call is the fundamental interface between an application and\r\n       the Linux kernel.\r\n\r\n   System calls and library wrapper functions\r\n       System calls are generally not invoked directly, but rather via wrapper\r\n       functions in glibc (or perhaps some other library).  For details of di\u2010\r\n       rect invocation of a system call, see intro(2).  Often, but not always,\r\n       the  name of the wrapper function is the same as the name of the system\r\n       call that it invokes.  For example, glibc contains a  function  chdir()\r\n       which invokes the underlying \"chdir\" system call.\r\n\r\n       Often the glibc wrapper function is quite thin, doing little work other\r\n       than copying arguments to the right registers before invoking the  sys\u2010\r\n       tem  call,  and  then setting errno appropriately after the system call\r\n       has returned.   (These  are  the  same  steps  that  are  performed  by\r\n       syscall(2), which can be used to invoke system calls for which no wrap\u2010\r\n       per function is provided.)  Note: system calls indicate  a  failure  by\r\n       returning  a negative error number to the caller on architectures with\u2010\r\n       out a separate error register/flag, as noted in syscall(2);  when  this\r\n       happens,  the  wrapper  function  negates the returned error number (to\r\n       make it positive), copies it to errno, and returns -1 to the caller  of\r\n       the wrapper.\r\n\r\n       Sometimes,  however,  the  wrapper function does some extra work before\r\n       invoking the system call.  For example, nowadays there are (for reasons\r\n       described  below)  two  related  system  calls,  truncate(2)  and trun\u2010\r\n       cate64(2), and the glibc truncate() wrapper function  checks  which  of\r\n       those  system  calls  are  provided  by the kernel and determines which\r\n       should be employed.\r\n\r\n   System call list\r\n       Below is a list of the Linux system calls.  In  the  list,  the  Kernel\r\n       column  indicates  the  kernel version for those system calls that were\r\n       new in Linux 2.2, or have appeared since that kernel version.  Note the\r\n       following points:\r\n\r\n       *  Where  no  kernel  version is indicated, the system call appeared in\r\n          kernel 1.0 or earlier.\r\n\r\n       *  Where a system call is marked \"1.2\" this means the system call prob\u2010\r\n          ably  appeared  in  a  1.1.x kernel version, and first appeared in a\r\n          stable kernel with 1.2.  (Development of the 1.2 kernel  was  initi\u2010\r\n          ated from a branch of kernel 1.0.6 via the 1.1.x unstable kernel se\u2010\r\n          ries.)\r\n\r\n       *  Where a system call is marked \"2.0\" this means the system call prob\u2010\r\n          ably  appeared  in  a  1.3.x kernel version, and first appeared in a\r\n          stable kernel with 2.0.  (Development of the 2.0 kernel  was  initi\u2010\r\n          ated from a branch of kernel 1.2.x, somewhere around 1.2.10, via the\r\n          1.3.x unstable kernel series.)\r\n\r\n       *  Where a system call is marked \"2.2\" this means the system call prob\u2010\r\n          ably  appeared  in  a  2.1.x kernel version, and first appeared in a\r\n          stable kernel with 2.2.0.  (Development of the 2.2 kernel was initi\u2010\r\n          ated  from  a  branch of kernel 2.0.21 via the 2.1.x unstable kernel\r\n          series.)\r\n\r\n       *  Where a system call is marked \"2.4\" this means the system call prob\u2010\r\n          ably  appeared  in  a  2.3.x kernel version, and first appeared in a\r\n          stable kernel with 2.4.0.  (Development of the 2.4 kernel was initi\u2010\r\n          ated from a branch of kernel 2.2.8 via the 2.3.x unstable kernel se\u2010\r\n          ries.)\r\n\r\n       *  Where a system call is marked \"2.6\" this means the system call prob\u2010\r\n          ably  appeared  in  a  2.5.x kernel version, and first appeared in a\r\n          stable kernel with 2.6.0.  (Development of kernel 2.6"}]}}, "9f081d0d9bc446f883bbf6a3643c7ac9": {"model_module": "@jupyter-widgets/output", "model_module_version": "1.0.0", "model_name": "OutputModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/output", "_model_module_version": "1.0.0", "_model_name": "OutputModel", "_view_count": null, "_view_module": "@jupyter-widgets/output", "_view_module_version": "1.0.0", "_view_name": "OutputView", "layout": "IPY_MODEL_b432e428d5444f898692ae2dd9fe2470", "msg_id": "", "outputs": [{"name": "stdout", "output_type": "stream", "text": "$ man cexp\nCEXP(3)                    Linux Programmer's Manual                   CEXP(3)\r\n\r\nN\bNA\bAM\bME\bE\r\n       cexp, cexpf, cexpl - complex exponential function\r\n\r\nS\bSY\bYN\bNO\bOP\bPS\bSI\bIS\bS\r\n       #\b#i\bin\bnc\bcl\blu\bud\bde\be <\b<c\bco\bom\bmp\bpl\ble\bex\bx.\b.h\bh>\b>\r\n\r\n       d\bdo\bou\bub\bbl\ble\be c\bco\bom\bmp\bpl\ble\bex\bx c\bce\bex\bxp\bp(\b(d\bdo\bou\bub\bbl\ble\be c\bco\bom\bmp\bpl\ble\bex\bx _\bz)\b);\b;\r\n       f\bfl\blo\boa\bat\bt c\bco\bom\bmp\bpl\ble\bex\bx c\bce\bex\bxp\bpf\bf(\b(f\bfl\blo\boa\bat\bt c\bco\bom\bmp\bpl\ble\bex\bx _\bz)\b);\b;\r\n       l\blo\bon\bng\bg d\bdo\bou\bub\bbl\ble\be c\bco\bom\bmp\bpl\ble\bex\bx c\bce\bex\bxp\bpl\bl(\b(l\blo\bon\bng\bg d\bdo\bou\bub\bbl\ble\be c\bco\bom\bmp\bpl\ble\bex\bx _\bz)\b);\b;\r\n\r\n       Link with _\b-_\bl_\bm.\r\n\r\nD\bDE\bES\bSC\bCR\bRI\bIP\bPT\bTI\bIO\bON\bN\r\n       These  functions  calculate  e  (2.71828...,  the base of natural loga\u2010\r\n       rithms) raised to the power of _\bz.\r\n\r\n       One has:\r\n\r\n           cexp(I * z) = ccos(z) + I * csin(z)\r\n\r\nV\bVE\bER\bRS\bSI\bIO\bON\bNS\bS\r\n       These functions first appeared in glibc in version 2.1.\r\n\r\nA\bAT\bTT\bTR\bRI\bIB\bBU\bUT\bTE\bES\bS\r\n       For an  explanation  of  the  terms  used  in  this  section,  see  a\bat\bt\u2010\b\u2010\r\n       t\btr\bri\bib\bbu\but\bte\bes\bs(7).\r\n\r\n       \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\r\n       \u2502I\bIn\bnt\bte\ber\brf\bfa\bac\bce\be                \u2502 A\bAt\btt\btr\bri\bib\bbu\but\bte\be     \u2502 V\bVa\bal\blu\bue\be   \u2502\r\n       \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\r\n       \u2502c\bce\bex\bxp\bp(), c\bce\bex\bxp\bpf\bf(), c\bce\bex\bxp\bpl\bl() \u2502 Thread safety \u2502 MT-Safe \u2502\r\n       \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\r\n\r\nC\bCO\bON\bNF\bFO\bOR\bRM\bMI\bIN\bNG\bG T\bTO\bO\r\n       C99, POSIX.1-2001, POSIX.1-2008.\r\n\r\nS\bSE\bEE\bE A\bAL\bLS\bSO\bO\r\n       c\bca\bab\bbs\bs(3), c\bce\bex\bxp\bp2\b2(3), c\bcl\blo\bog\bg(3), c\bcp\bpo\bow\bw(3), c\bco\bom\bmp\bpl\ble\bex\bx(7)\r\n\r\nC\bCO\bOL\bLO\bOP\bPH\bHO\bON\bN\r\n       This  page  is  part of release 5.05 of the Linux _\bm_\ba_\bn_\b-_\bp_\ba_\bg_\be_\bs project.  A\r\n       description of the project, information about reporting bugs,  and  the\r\n       latest     version     of     this    page,    can    be    found    at\r\n       https://www.kernel.org/doc/man-pages/.\r\n\r\n                                  2017-09-15                           CEXP(3)\r\n"}]}}, "ac6f6107204d4a22add87afb43b3fc0f": {"model_module": "@jupyter-widgets/output", "model_module_version": "1.0.0", "model_name": "OutputModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/output", "_model_module_version": "1.0.0", "_model_name": "OutputModel", "_view_count": null, "_view_module": "@jupyter-widgets/output", "_view_module_version": "1.0.0", "_view_name": "OutputView", "layout": "IPY_MODEL_59d0c0393390467592558139d5baee6e", "msg_id": "", "outputs": [{"name": "stdout", "output_type": "stream", "text": "$ grep -B 1 ' atof$' cexp.map\n .text          0x000000000041f210        0xb /usr/lib/gcc/x86_64-linux-gnu/9/../../../x86_64-linux-gnu/libc.a(atof.o)\r\n                0x000000000041f210               \u001b[01;31m\u001b[K atof\u001b[m\u001b[K\r\n"}]}}, "b0593ee428ba444498e5cfa685f0f1ed": {"model_module": "@jupyter-widgets/base", "model_module_version": "1.2.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": "1px solid black", "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": "100%", "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": "scroll", "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "b432e428d5444f898692ae2dd9fe2470": {"model_module": "@jupyter-widgets/base", "model_module_version": "1.2.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": "1px solid black", "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": "100%", "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": "scroll", "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "b62b9fde62444bf6855e5ff5ce6a3eb9": {"model_module": "@jupyter-widgets/output", "model_module_version": "1.0.0", "model_name": "OutputModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/output", "_model_module_version": "1.0.0", "_model_name": "OutputModel", "_view_count": null, "_view_module": "@jupyter-widgets/output", "_view_module_version": "1.0.0", "_view_name": "OutputView", "layout": "IPY_MODEL_5bcf025ba1bf4400991417f4c13df009", "msg_id": "", "outputs": [{"name": "stdout", "output_type": "stream", "text": "\ngcc -Werror  -g dynmem.c -o dynmem\r\n"}]}}, "ba6443dc369447ee8ca6ee0f34abfd63": {"model_module": "@jupyter-widgets/base", "model_module_version": "1.2.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": "1px solid black", "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": "100%", "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": "scroll", "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "bcbd754d28e84275a230b3cb79b0f084": {"model_module": "@jupyter-widgets/output", "model_module_version": "1.0.0", "model_name": "OutputModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/output", "_model_module_version": "1.0.0", "_model_name": "OutputModel", "_view_count": null, "_view_module": "@jupyter-widgets/output", "_view_module_version": "1.0.0", "_view_name": "OutputView", "layout": "IPY_MODEL_c2092afb2f1b4c69baf9e7e395a68305", "msg_id": "", "outputs": [{"name": "stdout", "output_type": "stream", "text": "$ ls -la /usr/include/math.h /usr/include/stdio.h /usr/include/complex.h\n-rw-r--r--. 1 root root  7164 Apr  7  2022 /usr/include/complex.h\r\n-rw-r--r--. 1 root root 46404 Apr  7  2022 /usr/include/math.h\r\n-rw-r--r--. 1 root root 29950 Apr  7  2022 /usr/include/stdio.h\r\n"}]}}, "bfd9bc8591394bc184b7aa5eee24ebad": {"model_module": "@jupyter-widgets/output", "model_module_version": "1.0.0", "model_name": "OutputModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/output", "_model_module_version": "1.0.0", "_model_name": "OutputModel", "_view_count": null, "_view_module": "@jupyter-widgets/output", "_view_module_version": "1.0.0", "_view_name": "OutputView", "layout": "IPY_MODEL_890ddfede0014dafb613744a8a2a7525", "msg_id": "", "outputs": [{"name": "stdout", "output_type": "stream", "text": "$ ./cexp\n-1.000000 + 0.000000 * i\r\n"}]}}, "c2092afb2f1b4c69baf9e7e395a68305": {"model_module": "@jupyter-widgets/base", "model_module_version": "1.2.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": "1px solid black", "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": "100%", "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": "scroll", "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "c2e4fe4faa584fa1a69b1a8fef4857d1": {"model_module": "@jupyter-widgets/base", "model_module_version": "1.2.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": "1px solid black", "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": "100%", "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": "scroll", "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "c6bae63a82e6494a8f6a76e269d3750d": {"model_module": "@jupyter-widgets/base", "model_module_version": "1.2.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": "1px solid black", "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": "100%", "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": "scroll", "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "cce28c1d8fdc46288089d0106baf8218": {"model_module": "@jupyter-widgets/base", "model_module_version": "1.2.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": "1px solid black", "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": "100%", "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": "scroll", "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "d3c3cc3ce82643f08ffe9ab6b1bcd576": {"model_module": "@jupyter-widgets/base", "model_module_version": "1.2.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": "1px solid black", "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": "100%", "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": "scroll", "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "d563c8f49193432087b2dbfbf28c5da2": {"model_module": "@jupyter-widgets/output", "model_module_version": "1.0.0", "model_name": "OutputModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/output", "_model_module_version": "1.0.0", "_model_name": "OutputModel", "_view_count": null, "_view_module": "@jupyter-widgets/output", "_view_module_version": "1.0.0", "_view_name": "OutputView", "layout": "IPY_MODEL_ba6443dc369447ee8ca6ee0f34abfd63", "msg_id": "", "outputs": [{"name": "stdout", "output_type": "stream", "text": "$ ar t /usr/lib/x86_64-linux-gnu/libm-2.31.a | head\ns_lib_version.o\r\ns_matherr.o\r\ns_signgam.o\r\nfclrexcpt.o\r\nfgetexcptflg.o\r\nfraiseexcpt.o\r\nfsetexcptflg.o\r\nftestexcept.o\r\nfegetround.o\r\nfesetround.o\r\n"}]}}, "e2ba5e8a60ac4d57ad525673802f6c22": {"model_module": "@jupyter-widgets/base", "model_module_version": "1.2.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": "1px solid black", "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": "100%", "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": "scroll", "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "e6fc8dba5e774c0ab4052444b0c3d4f9": {"model_module": "@jupyter-widgets/base", "model_module_version": "1.2.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": "1px solid black", "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": "100%", "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": "scroll", "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "ff0077e57d9f43e1b65c2ea01911605d": {"model_module": "@jupyter-widgets/base", "model_module_version": "1.2.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": "1px solid black", "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": "100%", "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": "scroll", "padding": null, "right": null, "top": null, "visibility": null, "width": null}}}, "version_major": 2, "version_minor": 0}
</script>


    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./C"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="L19.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title"><span class="section-number">19. </span>UC-SLS Lecture 19 : Using C to map and organize our data bytes - Data Types</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="L21.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><span class="section-number">21. </span>UC-SLS Lecture 21 : The rest of LibC and other libraries</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By Jonathan Appavoo<br/>
  
      &copy; Copyright 2021.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>